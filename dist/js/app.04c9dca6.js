(function(t){function e(e){for(var n,s,o=e[0],c=e[1],l=e[2],u=0,h=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(h.length)h.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},i={app:0},r=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"002e":function(t,e,a){},"14c0":function(t,e,a){"use strict";var n=a("ed5d"),i=a.n(n);i.a},"1ffc":function(t,e,a){"use strict";var n=a("3ceb"),i=a.n(n);i.a},2506:function(t,e,a){},"2aea":function(t,e,a){"use strict";var n=a("69d0"),i=a.n(n);i.a},"30ec":function(t,e,a){"use strict";var n=a("d78f"),i=a.n(n);i.a},"31ba":function(t,e,a){"use strict";var n=a("77d5"),i=a.n(n);i.a},"3ceb":function(t,e,a){},"3e60":function(t,e,a){"use strict";var n=a("f27c"),i=a.n(n);i.a},4400:function(t,e,a){"use strict";var n=a("2506"),i=a.n(n);i.a},5462:function(t,e,a){"use strict";var n=a("002e"),i=a.n(n);i.a},"56d7":function(t,e,a){"use strict";a.r(e);var n={};a.r(n),a.d(n,"vuexStore",(function(){return w})),a.d(n,"parsedSearch",(function(){return y})),a.d(n,"apiURL",(function(){return S})),a.d(n,"hostname",(function(){return k})),a.d(n,"loadTree",(function(){return P})),a.d(n,"loadConfig",(function(){return L})),a.d(n,"deleteConfig",(function(){return M})),a.d(n,"tablesFromConnection",(function(){return E})),a.d(n,"databaseMaps",(function(){return F})),a.d(n,"getListColumnSql",(function(){return V})),a.d(n,"getListModel",(function(){return z})),a.d(n,"getLiteral",(function(){return H})),a.d(n,"getFieldsForTable",(function(){return D})),a.d(n,"getIdentitiesForTableSet",(function(){return B})),a.d(n,"$buttonsForTable",(function(){return J})),a.d(n,"$fieldsForTable",(function(){return K})),a.d(n,"setFieldListSettings",(function(){return U})),a.d(n,"getTableConnectionId",(function(){return W})),a.d(n,"getTablesRelation",(function(){return Q})),a.d(n,"getDirectParents",(function(){return at})),a.d(n,"getDirectSuns",(function(){return nt})),a.d(n,"saveTree",(function(){return it})),a.d(n,"saveGlobalConfig",(function(){return rt})),a.d(n,"listFiles",(function(){return st})),a.d(n,"getTablesList",(function(){return ot})),a.d(n,"$dbq",(function(){return ct})),a.d(n,"keepDBConnAlive",(function(){return lt})),a.d(n,"downloadExcel",(function(){return dt}));a("ac1f"),a("841c"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{overflow:"hidden",background:"transparent"},attrs:{id:"circus"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.sessionId,expression:"!sessionId"}],staticClass:"login-container"},[a("div",{staticClass:"login-form"},[a("h1",[t._v("CIRCUS - Login")]),a("form",{attrs:{onsubmit:"return false"}},[a("div",{staticClass:"form-group"},[a("label",[t._v("Usuaurio")]),a("input",{ref:"controlUsuario",staticClass:"form-control",domProps:{value:t.getLoginCookie("usr")}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("Contraseña")]),a("input",{ref:"controlContrasena",staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.getLoginCookie("pass")}})]),a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.login()}}},[t._v("Login")])])])])]),a("contextDialog",{directives:[{name:"show",rawName:"v-show",value:t.contextDialog.show,expression:"contextDialog.show"}],attrs:{components:t.contextDialog.components,componentProps:t.contextDialog.componentProps}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showHelpState,expression:"showHelpState"}],staticClass:"panel-envelope",staticStyle:{height:"auto",width:"auto",background:"transparent","font-weight":"500","font-size":"11px",position:"absolute",bottom:"0","z-index":"100","align-self":"flex-end"}},[a("div",{ref:"helpCuadrant",staticStyle:{height:"50%",width:"100%",background:"white"},domProps:{innerHTML:t._s(t.helpText)}}),a("div",{staticClass:"custom-title",staticStyle:{position:"absolute",width:"176px","margin-top":"-20px",display:"none"}},[t._v("LOG")]),a("div",{ref:"logCuadrant",staticStyle:{height:"50%",width:"100%","overflow-y":"auto","overflow-x":"none",display:"none"}},t._l(t.logText,(function(e){return a("div",{staticStyle:{"margin-bottom":"7px"},domProps:{innerHTML:t._s(e)}})})),0)]),a("ly",{staticStyle:{position:"relative"},attrs:{flexbox:"1",column:"1",height:"1"}},[a("ly",{directives:[{name:"show",rawName:"v-show",value:t.show.formlist,expression:"show.formlist"}],ref:"contents",staticStyle:{height:"70%",position:"relative","z-index":"10",border:"0px solid red"},attrs:{width:"1",grow:"1",id:"containers"}},[a("ly",{attrs:{flexbox:"1",height:"1"}},[a("ly",{attrs:{grow:"1",height:"1"}},[a("ly",{attrs:{flexbox:"1",column:"1",height:"1"}},t._l(t.visibleAreas,(function(e){return a("ly",{style:t.areaHeight,attrs:{grow:"1"}},[a("Containers",{attrs:{containers:t.containersFromArea(e),panels:t.panels},on:{panelSwitch:t.panelSwitch}})],1)})),1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.panels.bottom&&t.admin,expression:"panels.bottom&&admin"}],style:{display:"flex",height:t.show.formlist?"30%":"100%"}},[a("div",{staticClass:"panel-envelope",staticStyle:{"flex-grow":"1",height:"100%",border:"0px solid red","max-height":"calc(100% - 0px)",position:"relative","min-width":"100%"},attrs:{id:"queriesList"}},[a("button",{staticStyle:{position:"absolute",top:"15px",right:"15px",padding:"3px","z-index":"1"},on:{click:function(e){t.show.formlist=!t.show.formlist}}},[a("div",{class:{"arrow-up":t.show.formlist,"arrow-down":!t.show.formlist}})]),a("SimpleTable",{staticStyle:{border:"1px solid gray","border-width":"0px 0",padding:"5px"},attrs:{nowrap:!1,searchable:!0,editablekeys:["Nombre"],hiddenKeys:["id"],rows:t.queries,actions:t.gridActions,cellMaxHeight:"40px"},on:{rowEdit:t.queriesTableOnChange,rowClick:t.queriesRowClick}})],1)])],1),a("ContextList")],1)},s=[],o=(a("99af"),a("4de4"),a("7db0"),a("4160"),a("c975"),a("d81d"),a("a434"),a("b0c0"),a("b64b"),a("d3b7"),a("25f0"),a("5319"),a("1276"),a("159b"),a("53ca")),c=(a("a4d3"),a("e01a"),a("d28b"),a("a15b"),a("4ec9"),a("c1f9"),a("3ca3"),a("ddb0"),a("2909")),l=a("3835"),d=a("5530"),u=a("c437"),h=a.n(u),f=a("2f62");function p(t,e){var a=e.path,n=e.value;n?_.set(t,a,n):_.set(t,a,!1)}var m={strict:!1,mutations:{setKey:function(t,e){var a=e.path,n=e.value;p(t,{path:a,value:n})},set_listModelAlias:function(t,e){var a=e.listModelName,n=e.value;t.database.listsModels[a].alias=n},setContainerType:function(t,e){var a=e.index,n=e.type;console.log({index:a,type:n}),t.containers[a].type=n},setVentana:function(t,e){var a=e.index;e.data;console.log(a)},Query_add:function(t,e){var a=e.query,n=e.cb,i={operation:"insert",columns:["v_nombre","v_identificador","v_fecha","v_json"],schemaSyntax:"views",language:"spanish",values:[a.customName,a.name,a.fecha,JSON.stringify(a)],dbID:"circus"};ct(i,n)},Query_setKey:function(t,e){var a,n=e.id,i=e.key,r=e.value;switch(i){case"customName":a="v_nombre";break}var s={operation:"update",columns:[a],schemaSyntax:"circus.dbo.views",language:"spanish",values:[r],whereSyntax:"v_id="+n};ct(s)},Query_delete:function(t,e){var a={operation:"delete",schemaSyntax:"circus.dbo.views",language:"spanish",whereSyntax:"v_id="+e};console.log(a),ct(a)},database_setLiteral:function(t,e){var a=e.key,n=e.literal;t.database.literales[a]=n},Ventana_setVisibility:function(t,e){var a=e.indexVentana,n=e.visible;t.ventanas.data.forEach((function(t){return t.visible=!1})),t.ventanas.data[a].visible=n},Ventana_clone:function(t,e){var a=e.index,n=JSON.cc(t.ventanas.data[a]);n.queryeditor.parameters=[],n.name="[NUEVA]",t.ventanas.data.push(n),t.qeParams.push([])},Ventana_delete:function(t,e){var a=e.index;t.ventanas.data.splice(a,1),t.qeParams.splice(a,1)},Ventana_injectQE:function(t,e){var a=e.indexVentana,n=e.qeParams;t.qeParams&&t.qeParams.length||(t.qeParams=[],t.ventanas.data.forEach((function(e){t.qeParams.push([])}))),t.qeParams[a]=n,t.qeParams=JSON.cc(t.qeParams)},Ventana_setName:function(t,e){var a=e.indexVentana,n=e.ventanaName;t.ventanas.data[a].name=n},Ventana_setTable:function(t,e){var a=e.indexVentana,n=e.tableName;t.ventanas.data[a].table=n},ContextMenu_open:function(t,e){t.contextMenu=JSON.cc(e)},ContextMenu_clear:function(t){t.contextMenu={}},ContextMenu_formUpdate:function(t,e){t.contextMenu.item=e},ContextMenu_commit:function(t){var e=t.contextMenu.cursor,a=t.contextMenu.item,n=new objeto(t).get(e);log(a),Object.assign(n,a)},checked_assign:function(t,e){var a=e.indexVentana,n=e.ids;t.ventanas.data[a].list.checkedIds=n},set_distinct:function(t,e){var a=e.indexVentana,n=e.value;t.ventanas.data[a].queryeditor.distinct=n,console.log(t.ventanas.data[a].queryeditor)},log:function(t,e){t.log||(t.log=[]);var a=new Date,n=a.toLocaleString("en-GB",{timeZone:"UTC"});t.log.unshift(n+"<br>"+e)},set_databaseConfig:function(t,e){var a=e.path,n=e.value;a="database.".concat(a),p(t,{path:a,value:n}),t.database.literales=JSON.cc(t.database.literales)},set_contextDialogProps:function(t,e){var a=["contextDialog","props"];p(t,{path:a,value:e})},set_favoriteToField:function(t,e){t.fieldsMap[e.field_full_name].favorite=t.fieldsMap[e.field_full_name].favorite?0:1},set_tablesMap:function(t,e){t.tablesMap=JSON.cc(t.tablesMap)}},getters:{ventanas:function(t){return t.ventanas.data},ventana:function(t,e){return function(t){return e.ventanas[t]}},qeParams:function(t,e){return function(e){return t.qeParams[e]}}},actions:{setVentana:function(t,e){t.getters;var a=t.commit;a("setVentana",{index:e,data:"juan"})},"context-menu":function(t,e){var a=t.commit,n=(t.state,e.action),i=e.item,r=e.cursor,s=e.title,o=e.branchs,c=e.keysSettings;switch(n){case"open":new objeto(i).toArray();var l={item:i,cursor:r,title:s,branchs:o,keysSettings:c};a("ContextMenu_open",l);break;case"formChange":a("ContextMenu_formUpdate",i);break;case"save":a("ContextMenu_commit");break;case"clear":a("ContextMenu_clear");break}}}},g=m,v=a("72bf"),b=a.n(v);a("af87");i["a"].use(f["a"]);var x,w,y=b.a.parse(location.search),S=y.api,k=y.hostname;JSON.cc=function(t){return"object"!=Object(o["a"])(t)?t:JSON.parse(JSON.stringify(t))};var C={connNameToDbName:{}};$.ajax({url:S+"services",data:"",method:"POST",async:!1,success:function(t){var e=JSON.parse(JSON.parse(t)),a={};Object.keys(e).forEach((function(t){a[t.toLocaleLowerCase()]=e[t]})),Object.assign(C.connNameToDbName,a)},error:function(t){console.log("error en services json")}});var O,N="";if($.ajax({url:S+"circusConfig",data:"",method:"POST",async:!1,success:function(t){N=JSON.parse(JSON.parse(t))},error:function(t){console.log("error en circusConfig json")}}),y.reset){var T;T=1==y.reset?"circus.json":y.reset,P((function(t){q(t),alert("Se ha importado la configuración del archivo '"+T+"' a su Configuración Local."),location="./?api="+S+"&hostname="+k+"&admin=1"}),T)}else{try{x=JSON.parse(localStorage["vuexStore"])}catch(Qa){alert("No se ha encontrado Cookie de configuración local.\n\nCargando configuración del servidor..."),location=window.location.href+"&reset=1"}q(x)}function P(t,e){$.ajax({url:y.api+"readFile",data:{fileName:e},method:"POST",async:!1,success:function(e){console.log("loadTree suceeded. "),t(JSON.parse(e))},error:function(t,e,a){console.log("loadTree Error. "),console.log(a)}})}function L(t){location="./?api="+S+"&dev=1&admin=1&reset="+t}function M(t,e){$.ajax({url:y.api+"deleteFile",data:{fileName:t},method:"POST",async:!1,success:function(t){e(t)}})}function q(t){var e=Object(d["a"])({state:Object(d["a"])({},t)},g);e.state.database;e.state.database=JSON.cc(N),Object.keys(N.tables).forEach((function(t){var a=N.tables[t];if(a){var n=a.fields_config;n&&Object.keys(n).forEach((function(a){var i=n[a],r=i.favorite;e.state.database.tables[t]&&e.state.database.tables[t].fields_config&&e.state.database.tables[t].fields_config[a]&&(e.state.database.tables[t].fields_config[a].favorite=r)}))}})),console.log("a"),w=new f["a"].Store(e),console.log("b"),localStorage.clear(),localStorage["vuexStore"]=JSON.stringify(JSON.cc(e.state)),console.log("c"),window.vuex=e.state,w.subscribe((function(t,e){var a=JSON.cc(e);console.log(a),console.log("d"),localStorage.clear(),console.log("e"),j(),console.log("Commit to Vuex."),window.vuex=a}))}function j(){O=JSON.parse(localStorage["vuexStore"])}function E(t){return[["clientes","clientes"],["polizas","polizas"],["recibos","recibos"],["colaboradores","colaboradores"]]}j();var F={setTablesMap:function(){var t=window.tablesMap?window.tablesMap:new Map,e=O.database.tables;Object.keys(e).forEach((function(a,n){var i=e[a],r=i.connection,s=i.table_server,o=i.table_catalog,c=i.table_schema?i.table_schema:"dbo",l=i.table_name,d=i.table_alias;r&&o&&l&&d&&(i.table_reference="[".concat(o,"].[").concat(c,"].[").concat(l,"]"),i.table_schema=c,s&&(i.table_reference="[".concat(s,"].")+i.table_reference),t.set(a,Object.assign(t.get(a)?t.get(a):{},i)))})),window.tablesMap=t,w.state.tablesMap=Object.fromEntries(t)},setFieldsMap:function(){window.fieldsMap={},window.events={},window.events.endcache=new Event("endcache");var t=0;w.state.fieldsMap||(w.state.fieldsMap={});var e=!0,a=!1,n=void 0;try{for(var i,r=window.tablesMap[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var s=Object(l["a"])(i.value,2),o=s[0];s[1];D(o,(function(e){var a=e.fields;e.identities;a.forEach((function(t){t.favorite=w.state.fieldsMap[t.field_full_name]?w.state.fieldsMap[t.field_full_name].favorite:0,window.fieldsMap[t.field_full_name]=t})),Object.assign(w.state.fieldsMap,window.fieldsMap),t++,t==window.tablesMap.size&&window.dispatchEvent(window.events.endcache)}))}}catch(Qa){a=!0,n=Qa}finally{try{e||null==r.return||r.return()}finally{if(a)throw n}}}};function V(t,e){var a=t.list,n=t.field_full_name,i=t.listType;if(!a)return n;if("dynamic"==i){var r=a.sqlValueFromId.replace("{{id}}",n),s="(".concat(r,")");return s}if(e)return n;var o="(case ".concat(n);return a.forEach?(a.forEach((function(t){var e=t[0],a=t[1];o+=" when ".concat(e," then '").concat(a,"' ")})),o+="end)",o):n}function z(t){return I(t)}function I(t){var e=O.database.listsModels,a=O.database.lists,n=a[t],i=JSON.cc(e[n]);return i}function H(t){var e=O.database.literales;if(e[t])return e[t];var a=O.database.computedFields,n=a.filter((function(e){return-1!=e.sql.indexOf(t)}));if(n.length)return n[0].literal;var i=t.split(".");return i[i.length-1]}function D(t,e){t=R(t);var a=window.tablesMap.get(t);K(t,(function(t){var n=t.filter((function(t,e){return t.is_identity})).map((function(t){return t.column_name}));n.length||(n=[a.table_pkname]),e({fields:t,identities:n})}))}function R(t){var e;return Object.keys(O.database.tables).forEach((function(a){a.toLowerCase()==t.toLowerCase()&&(e=a)})),e}function B(t,e){var a=window.tablesMap.get(t);K(t,(function(t){var n=t.filter((function(t,e){return t.is_identity})).map((function(t){return{column_name:t.column_name,table_name:t.table_name}}));n.length||(n=[a.table_pkname]),e(n)}))}function A(t,e){var a=window.tablesMap.get(t);if(!a)return console.log("api.js no encuentra la tabla '".concat(t,"'.")),!1;var n=a.table_name,i=a.table_schema,r=a.table_catalog,s=a.table_server,o=a.connection,c="[".concat(r,"].[").concat(i,"].[sp_circus_fields] '").concat(n,"'");s&&(c="[".concat(s,"].").concat(c)),ct({operation:"sp",sp_name:c,dbID:o},(function(t){e(t)}))}function J(t,e){var a=window.tablesMap.get(t);return a.buttons_config}function K(t,e){var a=Q(t).names,n=[],i=[],r=0;function s(a){var r=i[a];function o(r){if(n.push.apply(n,Object(c["a"])(r)),a<i.length-1)s(a+1);else{var o=window.tablesMap.get(t);o.evaluatedFields=n,window.tablesMap.set(t,o),e(n)}}r.then((function(t){o(t)}))}a.forEach((function(t){t.split(".");var e,a=window.tablesMap.get(t),n=(W(t),a.table_catalog),s=a.table_name,o=a.table_schema,c=a.table_server,l=a.table_alias,d=a.table_pkname,u=(a.fields_config,a.fields_computed),h=a.table_reference;function f(e){e.forEach((function(e,a){var n=!1,i=!1,s=!1,u=!1,f=!1,p=e.is_computed?"".concat(e.column_name):"[".concat(l,"].[").concat(e.column_name,"]");Object.assign(e,{form:{group:"grupo2"},favorite:f,list:n,listModel:i,listAlias:s,listType:u,table_schema:o,table_server:c,table_alias:l,table_config_keyname:t,field_full_name:p,table_full_name:h,table_pkname:d,index:r,key:p,aggregate_function:"DISTINCT",basic_data_type:function(t){var e="text",a="number",n="date";switch(t){case"number":return a;case"int":return a;case"float":return a;case"money":return a;case"datetime":return n;case"date":return n;default:return e}}(e.data_type)}),r++}))}e=new Promise((function(e,a){A(t,(function(t){var a=JSON.parse(JSON.stringify(t));u&&u.length&&u.forEach((function(t){a.push({CHARACTER_MAXIMUM_LENGTH:10,column_name:t.sql,data_type:t.type,is_identity:!1,table_name:s,table_schema:o,table_catalog:n,literal:t.literal,is_computed:!0,label:t.literal})})),f(a),e(a)}))})),i.push(e)})),s(0)}function U(t){var e=window.tablesMap.get(t.table_config_keyname),a=(e.table_catalog,e.table_name,e.table_schema,e.table_server,e.table_alias,e.table_pkname,e.fields_config),n=(e.fields_computed,e.table_reference,!1),i=!1,r=!1,s=!1;if(a&&!t.is_computed){var o=$$(a).getCI(t.column_name);o&&(i=o.listModel,n=O.database.listsModels[i],n&&(r=n.alias,n.sqlListGrid?s="dynamic":(s="static",n=n.valuesArray?n.valuesArray:n),t.key=V({list:n,field_full_name:t.field_full_name,listType:s})))}return Object.assign(t,{list:n,listModel:i,listAlias:r,listType:s}),t}function W(t,e){var a=!1;return Object.keys(O.database.tables).forEach((function(n){if(n.toLocaleLowerCase()==t.toLocaleLowerCase()){var i=O.database.tables[n].connection;a=e?C.connNameToDbName[i.toLowerCase()]:i}})),a}function Q(t){W(t,1);var e=window.tablesMap.get(t);if(!e)return console.log("api.js no ha encontrado la tabla '".concat(t,"' en el mapa de tablas.")),!1;var a="".concat(e.table_reference," as [").concat(e.table_alias,"]"),n={names:[t],joinSyntax:a},i=tt(t);n.joinSyntax+=i.joinSyntax;var r=i.names;do{var s=r;r=[];var o=!0,c=!1,l=void 0;try{for(var d,u=s[Symbol.iterator]();!(o=(d=u.next()).done);o=!0){t=d.value;var h=tt(t,n.names.concat(s));r=r.concat(h.names),n.names.push(t),n.joinSyntax+=h.joinSyntax}}catch(Qa){c=!0,l=Qa}finally{try{o||null==u.return||u.return()}finally{if(c)throw l}}}while(r.length);return X=-1,Z=[],n}F.setTablesMap(),F.setFieldsMap();var G=["a","b","c","d","e","f","g","h","i"],Z=[],X=-1;function Y(){return X++,G[X]}function tt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=window.tablesMap.get(t);if(!a)return!1;var n={names:[],joinSyntax:""},i=O.database.tables,r=i[t],s=[],o=(a.table_reference,a.table_alias);if(!r)return n;var c="",l=r.relatedTables?r.relatedTables:{};return Object.keys(l).filter((function(t){return-1==e.indexOf(t)})).forEach((function(e,a){var n=window.tablesMap.get(e);if(!n)return!1;var i=l[e],r=i.remoteField,d=i.localField,u=et(W(e,1)),h=(et(W(t,1)),l[e].join?l[e].join:"INNER JOIN"),f=("".concat(u,".dbo.").concat(et(e)),m(e)&&Y(),n.table_reference),p=n.table_alias;function m(t){return-1!=Z.indexOf(t)}m(e)||(c+=" ".concat(h," ").concat(f," AS [").concat(p,"] ON [").concat(p,"].[").concat(d,"] =  [").concat(o,"].[").concat(r,"]")),s.push(e),Z.push(e)})),n.names=s,n.joinSyntax=c,n}function et(t){var e=t.split("."),a=e.length>1?e[e.length-1]:t;return a}function at(t){O.database.tables[t];var e=O.database.tables[t].relatedTables,a=e||{};return a}function nt(t){var e=O.database.tables,a=Object.keys(e).filter((function(a){var n=e[a];if(!n.relatedTables)return!1;var i=Object.keys(n.relatedTables).map((function(t){return t.toLowerCase()}));return-1!=i.indexOf(t.toLowerCase())})),n={};return a.forEach((function(a){n[a]=e[a].relatedTables[t]})),n}function it(t,e){if(e){var a=window.prompt("Introduzca el nombre que quiere dar al archivo de configuración",t);if(!a)return!1;t=a+(-1==a.indexOf(".json")?".json":"")}return t||(t=h()()+".json"),$.ajax({url:S+"writeFile",data:{json:localStorage["vuexStore"],fileName:t},method:"POST",success:function(e){console.log("Model saved to "+t)}}),t}function rt(t){var e=t.path,a=t.value;console.log({path:e,value:a}),$.ajax({url:S+"writeConfig",data:{path:e,value:a},method:"POST",success:function(t){console.log("Global State saved.")}})}function st(t,e){$.ajax({url:S+"listFiles",data:{folder:t},method:"POST",success:function(t){e(JSON.parse(t))}})}function ot(t){var e=[],a=[],n=C.connNameToDbName,i=0;function r(){a[i].then((function(n){i++,i<a.length?r():t(e)}),(function(t){}))}Object.keys(n).forEach((function(t){var i=t;n[i];a.push(new Promise((function(t,a){ct({columns:["name"],schemaSyntax:"sys.tables",dbID:i,whereSyntax:"name is not null"},(function(a){e.push({label:i,content:a.map((function(t){return t.name}))}),t("all cool")}))})))})),r()}function ct(t,e,a,n){t.language="spanish",a||(a=!0);var i=n?"request":"dbq";$.ajax({url:S+i,data:"params=".concat(encodeURIComponent(JSON.stringify(t))),method:"POST",async:a,success:function(t){var a=JSON.parse(t);a.length&&a[0].Error&&window.circus.showHelpBox({title:"Error en consulta SQL",text:JSON.stringify(a[0])},!0),e&&e(a)},error:function(t){console.log(t)}})}function lt(){$.ajax({url:S+"ping",data:"dbID=visual",method:"POST",success:function(t){console.log("ping")},error:function(t){console.log("error ajax ping")}})}function dt(t,e){window.open(S+"downloadExcel?"+"params=".concat(encodeURIComponent(JSON.stringify(t)),"&types=").concat(encodeURIComponent(JSON.stringify(e))))}var ut={set_favoriteToField:function(t){var e=t.tableKeyName,a=t.fieldName,n=["tables","".concat(e),"fields_config","".concat(a),"favorite"],i=ft(),r=$$(i).getCIpath(n),s=$$(i).getCI(n);return{path:_.join(r,"."),value:s?0:1}},set_listModelNameToField:function(t){var e=t.listModelName,a=t.tableName,n=t.fieldName,i=["tables","".concat(a),"fields_config","".concat(n),"listModel"],r=ft(),s=$$(r).getCIpath(i);return{path:_.join(s,"."),value:e}}},ht=ut;function ft(){return JSON.parse(localStorage["vuexStore"]).database}var pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"contextList",staticClass:"context-list",style:{left:t.right?"":t.left+"px",right:t.right?t.right+"px":"",top:t.top+"px","max-height":t.maxheight+"px","margin-left":t.right?"20px":"","margin-right":t.right?"":"20px"},attrs:{id:"circusContextList"}},[a("div",{staticStyle:{padding:"4px 0 6px 6px",width:"100%",background:"#ccc","font-weight":"bold",border:"0px solid transparent","border-width-top":"0px"}},[t._v(t._s(t.qeParam.alias))]),a("div",{staticStyle:{clear:"both",float:"none",width:"100%",border:"0px solid red",height:"21px","padding-top":"1px"}},[a("button",{staticStyle:{float:"left","margin-left":"4px"},attrs:{"data-help-code":"context-list-button-filled"},on:{click:function(e){return t.emptySearchString()}}},[a("svg",{staticStyle:{width:"12px",margin:"-2px 0 0 -4px"},attrs:{height:"50px",viewBox:"-48 0 407 407",width:"50px",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"m89.199219 37c0-12.132812 9.46875-21 21.601562-21h88.800781c12.128907 0 21.597657 8.867188 21.597657 21v23h16v-23c0-20.953125-16.644531-37-37.597657-37h-88.800781c-20.953125 0-37.601562 16.046875-37.601562 37v23h16zm0 0"}}),a("path",{attrs:{d:"m60.601562 407h189.199219c18.242188 0 32.398438-16.046875 32.398438-36v-247h-254v247c0 19.953125 14.15625 36 32.402343 36zm145.597657-244.800781c0-4.417969 3.582031-8 8-8s8 3.582031 8 8v189c0 4.417969-3.582031 8-8 8s-8-3.582031-8-8zm-59 0c0-4.417969 3.582031-8 8-8s8 3.582031 8 8v189c0 4.417969-3.582031 8-8 8s-8-3.582031-8-8zm-59 0c0-4.417969 3.582031-8 8-8s8 3.582031 8 8v189c0 4.417969-3.582031 8-8 8s-8-3.582031-8-8zm0 0"}}),a("path",{attrs:{d:"m20 108h270.398438c11.046874 0 20-8.953125 20-20s-8.953126-20-20-20h-270.398438c-11.046875 0-20 8.953125-20 20s8.953125 20 20 20zm0 0"}})])]),a("button",{staticStyle:{float:"left"},attrs:{"data-help-code":"context-list-button-empty"},on:{click:function(e){return t.contextListButton("empty")}}},[a("svg",{staticStyle:{"enable-background":"new 0 0 50.613 50.613",zoom:"0.6","margin-left":"-4px","margin-top":"3px"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"50.613px",height:"50.613px",viewBox:"0 0 50.613 50.613","xml:space":"preserve"}},[a("g",[a("g",[a("g",[a("circle",{attrs:{cx:"22.724",cy:"43.575",r:"4.415"}}),t._v(" "),a("circle",{attrs:{cx:"41.406",cy:"43.63",r:"4.415"}}),t._v(" "),a("path",{attrs:{d:"M46.707,32.312H20.886L10.549,2.568H2.5c-1.381,0-2.5,1.119-2.5,2.5s1.119,2.5,2.5,2.5h4.493L17.33,37.312h29.377\t\t\t\tc1.381,0,2.5-1.119,2.5-2.5S48.088,32.312,46.707,32.312z"}})])])]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")])]),a("button",{staticStyle:{float:"left"},attrs:{"data-help-code":"context-list-button-filled"},on:{click:function(e){return t.contextListButton("filled")}}},[a("svg",{staticStyle:{"enable-background":"new 0 0 50.613 50.613",zoom:"0.6","margin-left":"-4px","margin-top":"3px"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"50.613px",height:"50.613px",viewBox:"0 0 50.613 50.613","xml:space":"preserve"}},[a("g",[a("g",[a("g",[a("path",{attrs:{d:"M49.569,11.145H20.055c-0.961,0-1.508,0.743-1.223,1.661l4.669,13.677c0.23,0.738,1.044,1.336,1.817,1.336h19.35\t\t\t\tc0.773,0,1.586-0.598,1.814-1.336l4.069-14C50.783,11.744,50.344,11.145,49.569,11.145z"}}),t._v(" "),a("circle",{attrs:{cx:"22.724",cy:"43.575",r:"4.415"}}),t._v(" "),a("circle",{attrs:{cx:"41.406",cy:"43.63",r:"4.415"}}),t._v(" "),a("path",{attrs:{d:"M46.707,32.312H20.886L10.549,2.568H2.5c-1.381,0-2.5,1.119-2.5,2.5s1.119,2.5,2.5,2.5h4.493L17.33,37.312h29.377\t\t\t\tc1.381,0,2.5-1.119,2.5-2.5S48.088,32.312,46.707,32.312z"}})])])]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")])])]),a("div",{staticClass:"blobs",staticStyle:{height:"auto",width:"100%",border:"0px solid #ddd",padding:"2px 5px","min-height":"21px","max-width":"500px","margin-bottom":"4px"}},t._l(t.firstSearchStringArray,(function(e){return a("div",{staticClass:"blob",on:{click:function(a){return t.uncheckRow(e,a)}}},[t._v(" "+t._s(e)+" ")])})),0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchString,expression:"searchString"}],staticStyle:{height:"21px",width:"100%",border:"1px solid #ddd",padding:"15px 5px",margin:"0px",background:"white",cursor:"text","box-shadow":"0 0 5px 0px inset #ccc","border-radius":"1px"},attrs:{contenteditable:"true",placeholder:"Buscar..."},domProps:{value:t.searchString},on:{keyup:function(e){return t.updateContext(e)},input:function(e){e.target.composing||(t.searchString=e.target.value)}}}),"list"==t.type?a("SimpleTable",{ref:"simpleTable",attrs:{rows:t.rows,hiddenKeys:t.hiddenKeys,checkable:!0,searchable:t.searchable,selectable:!1,showHeaders:!1,checkedRows:t.checkedRows.map((function(t){return t.i})),singlecheck:t.singlecheck,searchString:t.searchString,showSearchField:!1},on:{rowClick:t.contextListRowClick,checkClick:t.contextListCheckClick,search:t.contextListSearch}}):"date"==t.type||"number"==t.type?a("div",{staticStyle:{width:"100%",height:"100%",background:"white",padding:"5px",border:"1px solid #ddd"}},[a("div",{ref:"contextList_rango",staticStyle:{"min-width":"100px"}},[a("label",{staticStyle:{"font-weight":"normal"}},[t._v("Desde")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.leftVal,expression:"leftVal"}],ref:"desde",staticClass:"form-control",attrs:{"data-help-code":"search-parameter-value"},domProps:{value:t.leftVal},on:{blur:function(e){return t.contextListKeyUp()},input:function(e){e.target.composing||(t.leftVal=e.target.value)}}}),a("label",{staticStyle:{"font-weight":"normal"}},[t._v("Hasta")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rightVal,expression:"rightVal"}],ref:"hasta",staticClass:"form-control",attrs:{"data-help-code":"search-parameter-value"},domProps:{value:t.rightVal},on:{blur:function(e){return t.contextListKeyUp()},input:function(e){e.target.composing||(t.rightVal=e.target.value)}}})])]):t._e()],1)},mt=[],gt=(a("caad"),a("2532"),a("498a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"simple_table_vue",staticClass:"simple-table-vue",style:{width:"100%",height:"100%","max-height":"inherit",overflow:"hidden","box-sizing":"border-box",position:"relative"}},[a("div",{ref:"scrollableDiv",style:{height:"100%","overflow-x":t.overflow,"overflow-y":"scroll","max-height":"inherit"},attrs:{id:"scrollableDiv"},on:{scroll:t.scrollHeaders}},[a("table",{staticClass:"table table-condensed header"},[a("tbody",{ref:"header",style:{position:"absolute"}},[t.showHeaders?a("tr",[t.checkable&&t.editedRows.length?a("td",{staticStyle:{"text-align":"center"}},[a("input",{attrs:{type:"checkbox"},on:{click:function(e){return t.allChecksClick(e)}}})]):t._e(),t._l(t.keys,(function(e,n){return a("td",{attrs:{"data-order":t.getOrder(e)},on:{click:function(a){return t.headerClick(e,a.target,n)}}},[t._v(t._s(e))])}))],2):t._e(),t.searchable?a("tr",{directives:[{name:"show",rawName:"v-show",value:t.showSearchField,expression:"showSearchField"}]},[t.checkable?a("td"):t._e(),t._l(t.keys,(function(e,n){return a("td",[a("div",{staticStyle:{width:"100%",cursor:"text"},attrs:{contenteditable:"true",id:e},on:{keyup:function(e){return t.filterTable()}}},[t._v(t._s(t.searchString))])])}))],2):t._e()])]),a("table",{ref:"tabla",staticClass:"table table-condensed",attrs:{"data-component":"Tabla"}},[a("tbody",{ref:"tbody"},t._l(t.editedRows,(function(e,n){return e._filterPassed?a("tr",{class:{rowSelected:t.selectedRowIndex==e._rowIndex,rowChecked:e._checked},on:{click:function(a){return t.onRowClick(e,n,a)}}},[t.checkable?a("td",{class:t.tdClass,staticStyle:{"text-align":"center",width:"1px"}},[a("input",{attrs:{type:"checkbox"},domProps:{checked:e._checked},on:{click:function(a){return t.onCheckClick(e,n,a)}}})]):t._e(),t._l(t.keys,(function(n){return[t.editablekeys.length&&-1!=t.editablekeys.indexOf(n)?a("td",{class:t.tdClass,attrs:{contenteditable:-1!=t.editablekeys.indexOf(n),"data-help-code":-1!=t.editablekeys.indexOf(n)?"general-cell-canedit":""},on:{blur:function(a){return t.editTable(a,n,e._rowIndex)},keyup:function(e){return t.resizeHeaders()}}},[t._v(t._s(e[n]))]):a("td",{class:t.tdClass},[a("div",{style:t.wrapperStyle,attrs:{title:e[n]}},[t._v(t._s(e[n]))])])]})),t.actions.length?a("td",{class:t.tdClass,staticStyle:{"white-space":"nowrap"}},t._l(t.actions,(function(n){return a("button",{attrs:{"data-help-code":"general-record-delete"},domProps:{innerHTML:t._s(n.button)},on:{click:function(t){return n.func(t,e._rowIndex)}}})})),0):t._e()],2):t._e()})),0),a("tfoot",{staticStyle:{visibility:"hidden"}},[a("tr",[t.checkable?a("td",{staticStyle:{"text-align":"center","padding-top":"0","padding-bottom":"0"}},[a("div",{staticStyle:{height:"0",overflow:"hidden"}})]):t._e(),t._l(t.keys,(function(e){return a("td",{staticStyle:{"padding-top":"0","padding-bottom":"0"}},[a("div",{staticStyle:{height:"0",overflow:"hidden"}},[t._v(t._s(e))])])}))],2)])])])])}),vt=[],bt=(a("4d63"),a("466d"),a("41a6")),xt=a.n(bt),wt={props:{rows:{type:Array,required:!0},nowrap:Boolean,selectable:{Type:Boolean,default:!0},searchable:Boolean,showSearchField:Boolean,searchString:String,deleteable:Boolean,orderable:Boolean,checkable:Boolean,singlecheck:Boolean,showHeaders:{type:Boolean,default:!0},cellMaxHeight:String,overflow:String,checkedRows:{type:Array,default:function(){return[]}},hiddenKeys:{type:Array,default:function(){return[]}},editablekeys:{type:Array,default:function(){return[]}},actions:{type:Array,default:function(){return[]}}},data:function(){return{orderby:{},editedRows:this.generateEditedRows(),selectedRowIndex:{},wrapperStyle:function(){var t={};return this.cellMaxHeight?(Object.assign(t,{"max-height":this.cellMaxHeight,overflow:"hidden","text-overflow":"ellipsis"}),t):t}.bind(this)()}},watch:{rows:function(){this.editedRows=this.generateEditedRows(),this.selectedRowIndex=-1},checkedRows:function(){this.editedRows=this.generateEditedRows()}},computed:{keys:function(){var t=this;if(!this.rows.length)return[];var e=Object.keys(this.rows[0]).filter((function(e){return-1==t.hiddenKeys.indexOf(e)}));return e},tdClass:function(){var t={nowrap:!1};return this.nowrap&&(t.nowrap=1),t}},methods:{generateEditedRows:function(){var t=this;if(!this.rows.length)return[];var e=this.rows.map((function(e,a){return Object.assign({},e,{_rowIndex:a,_filterPassed:!0,_checked:-1!=t.checkedRows.indexOf(a)})}));return e},reIndexRows:function(t){return this.rows.length?(this.rows.forEach((function(t,e){t._rowIndex=e})),t):t},editTable:function(t,e,a){var n=xt()(t.target).text();xt()(t.target).text(n),this.editedRows[a][e]=n;var i=Object.assign(this.rows[a],this.editedRows[a]);this.$emit("rowEdit",Object.assign(i,{__editedKeyName__:e}))},filterTable:function(){var t=this,e=xt()(this.$refs.simple_table_vue).find('.header [contenteditable="true"]');this.editedRows.forEach((function(a,n){var i=!0;e.each((function(){if(i){var t=xt()(this).text(),e=this.id,n=a[e],r=new RegExp(t,"gi"),s=!(!n||null==n||"undefined"==typeof n)&&n.toString().match(r);i=!(""!=t&&!s)}})),t.editedRows[n]._filterPassed=i})),this.resizeHeaders();var a=[];e.each((function(){a.push(xt()(this).html())})),this.$emit("search",a)},onRowClick:function(t,e,a){if(!this.selectable)return this.onCheckClick(t,e,a),!1;this.selectedRowIndex=t._rowIndex,this.$emit("rowClick",t)},onCheckClick:function(t,e,a){a.stopPropagation();var n=JSON.parse(JSON.stringify(this.editedRows));this.singlecheck&&n.forEach((function(t,e){t._checked=!1}));var i=JSON.parse(JSON.stringify(t));i._checked=a.target.checked?a.target.checked:!i._checked,n[e]=i;var r=n.filter((function(t){return t._checked}));this.editedRows=n,this.$emit("checkClick",r)},allChecksClick:function(t){t.stopPropagation(),this.editedRows.forEach((function(e){e._checked=t.target.checked}));var e=this.editedRows.filter((function(t){return t._checked})).map((function(t){return t._rowIndex}));this.$emit("checkClick",e)},headerClick:function(t,e,a){this.$emit("headerClick",{key:t,target:e,index:a})},orderBy:function(t,e){if(!this.orderable)return!1;var a,n=this.orderby[t];switch(n){case"asc":a="desc";break;case"desc":a=!1;break;default:a="asc"}delete this.orderby[t],xt()(e).removeAttr("data-order"),a&&(this.orderby[t]=a,xt()(e).attr("data-order",a)),this.$emit("orderBy",this.orderby)},getOrder:function(t){var e=this.orderby[t];return e},resizeHeaders:function(){var t=xt()(this.$refs.header),e=xt()(this.$refs.tbody),a=e.find("tr:visible").eq(0).find("td"),n=t.find("tr").eq(0).find("td"),i=xt()(this.$refs.scrollableDiv),r=[];i.height("100%"),t.closest("tbody").width(e.closest("table").width()),a.each((function(t){var e=xt()(this),a=n.eq(t),i=e.width();a.width(i),r.push(i)}));var s=t.height();t.css({"margin-top":"-"+s+"px"}),xt()(this.$refs.simple_table_vue).css({"padding-top":s+"px"}),this.scrollHeaders();var o=xt()(this.$refs.simple_table_vue).outerHeight();i.height(o),this.$emit("resizeHeaders",r)},scrollHeaders:function(){var t=this.$refs.scrollableDiv;if(!t)return!1;var e=xt()(this.$refs.header),a=-1*t.scrollLeft;xt()(".simple-table-vue").width();e.css({"margin-left":a+"px"}),this.$emit("scrollHeaders",-1*a)},reset:function(){this.$nextTick((function(){var t=JSON.cc(this.generateEditedRows());this.editedRows=t}))}},updated:function(){this.resizeHeaders(),this.filterTable()},mounted:function(){window.addEventListener("resize",this.resizeHeaders),this.resizeHeaders(),new ResizeObserver(this.resizeHeaders).observe(this.$refs.simple_table_vue)},beforeDestroy:function(){window.removeEventListener("resize",this.resizeHeaders)}},yt=wt,_t=a("2877"),St=Object(_t["a"])(yt,gt,vt,!1,null,null,null),kt=St.exports,Ct=a("d4ec"),Ot=a("bee2"),$t=function(){function t(e,a){Object(Ct["a"])(this,t),this.params=e,this.queries=a}return Object(Ot["a"])(t,[{key:"getParams",value:function(t){return this.params}},{key:"getColumns",value:function(){var t=this.params.filter((function(t){return t._inlist})).map((function(t){var e=t.key;return"date"==t.data_type&&(e="(convert(char(10),".concat(e,",103))")),"".concat(e," as [").concat(t.alias,"]")}));return t}},{key:"getSqlSyntax",value:function(){var t,e=this,a="";return this.params.filter((function(t){return t._active})).forEach((function(n){var i=n.vista,r=!1;try{var s=JSON.parse(n.value);if("object"==Object(o["a"])(s)&&!s.length){var c=s.sql,l=s.descripcion;r={sql:c,descripcion:l}}}catch(Qa){}if(i&&""!=i){console.log("motito"+i+"--");var d=n.campo,u=e.getQueryByName(i),h=u.joinSyntax,f=u.whereSql;t=" ".concat(n.key," on( SELECT ").concat(d," FROM ").concat(h," ").concat(f," )")}else if(r)t=" ".concat(n.key," IN ( ").concat(r.sql," )");else{if(n.list&&n.list.length){var p=e.matchListElements(n.list,n.text),m="";p.forEach((function(t){var e=t[0];m+='"'.concat(e,'" OR ')})),""!=m&&(m=m.substring(0,m.length-4),n.value=m)}t=Lt(n.key,n.text,n.data_type,n)}"%"!=n.value&&"[]"!=n.value&&""!=n.value&&(a+=" ".concat(n.operator," ").concat(n.leftText," ").concat(t," ").concat(n.rightText))})),a.length>0&&(a=a.substring(4)),a}},{key:"getOrderBy",value:function(){var t=[];return this.params.forEach((function(e){var a=e._orderby,n="asc"==a||"desc"==a;if(n){var i=e.key;t.push(i+" "+a)}})),t}},{key:"getQueryByName",value:function(t){this.api.$dbq({schemaSyntax:"views",columns:["v_json"],whereSyntax:"name = "+t,language:"spanish",dbID:"circus"},(function(t){var e=t[0].v_json;console.log(e)}),!1)}},{key:"getWhereText",value:function(){var t="";return this.params.filter((function(t){return t._active})).forEach((function(e){t+=e.operator+" "+e.leftText+" "+e.alias+" = "+e.text+" "+e.rightText})),t}},{key:"matchListElements",value:function(t,e){var a=[];return t&&(a=t.filter((function(t){if(-1!=t[1].indexOf(e))return!0}))),a}}]),t}();function Nt(t){if(-1!=t.indexOf('"'))return t;var e=["> ","< ",">= ","<= ","<> ","= "],a=t.split(" - "),n={},i=!1;if(2==a.length){var r=a[0],s=a[1];n.val1=r,n.val2=s,i=!0}return i||e.forEach((function(e){var a=t.split(e);if(2==a.length&&!i){var r=a[1];n.val1=r,n.operator=e,i=!0}})),i?n:t}function Tt(t){if("object"==Object(o["a"])(t)){var e=t.val1,a=t.val2,n=t.operator;return"undefined"!=typeof a?'">='.concat(e,'" AND "<=').concat(a,'"'):'"'.concat(n).concat(e,'"')}return t}function Pt(t){var e=/ *hoy *\( *([\+,\-] *\d+ *[d,m,a,D,M,A]){0,1} *\) */gi,a=t.match(e);return a?(a.forEach((function(e){t=t.replace(e,n(e))})),t):t;function n(t){var e=t.replace(/ */gi,"").replace("hoy(","").replace(")","");if(!e.length)return"getdate()";var a=e[0],n=e.substr(1,e.length-2),i=e[e.length-1];switch(i){case"a":i="year";break;case"m":i="month";break;case"d":i="day";break}var r="dateadd(".concat(i,",").concat(a).concat(n,",getdate())");return r}}function Lt(t,e,a,n){var i=a,r="number"==i,s="date"==i,o='"%" or ""',c=!1;(r||s)&&(e=Tt(Nt(e))),"%"==e&&(e=o);try{c=JSON.parse(e),"string"!=typeof c&&"number"!=typeof c||(c=void 0)}catch(Qa){}var l=/"([^"]*)"/gi,d=e.match(l);if(c){var u=c.map((function(t){return"'".concat(t.replace(/\'/gi,"''"),"'")})),h="";return u.forEach((function(e){h=h+t+" LIKE "+e+" OR "})),h.length&&(h="("+h.substring(0,h.length-3)+")"),r||s?"("+t+" IN ("+u+"))":h}if(d){var f=new RegExp(String.fromCharCode(160),"g"),p=new RegExp(String.fromCharCode(10),"g"),m='(" is null" or "=\'\'")';x="";if(e=e.replace(f,"").replace(p,""),(r||s)&&(e=e.replace('""',m)),r||s){if(x=Pt(e.replace(l,t+"$1")),s){var g=new RegExp("[0-9]{1,2}/[0-9]{1,2}/[0-9]{4}","g"),v=x.match(g);if(null!=v)for(var b=0;b<v.length;b++)x=x.replace(v[b],"'"+v[b]+"'")}}else{for(b=0;b<d.length;b++)e=e.replace(d[b],d[b]);x=e.replace(l,t+" like '$1'"),x=x.replace(t+" like ''","("+t+" is null OR "+t+"='')")}return"("+x+")"}if(s){var x="convert(char(10),"+t+",103) like '%"+e+"%'";return"("+x+")"}return"("+t+" like '%"+e+"%')"}var Mt,qt={components:{SimpleTable:kt},props:{},data:function(){return{rows:[],hiddenKeys:[],top:400,left:100,right:!1,height:300,maxheight:300,checkedRows:[],type:"text",comparation:0,leftVal:"",rightVal:"",searchString:"",firstSearchString:"",searchable:!0,qeParam:{}}},watch:{searchString:function(t,e){this.searchString=this.simpleTableSearchString()}},mounted:function(){window.contextList=this},computed:{firstSearchStringArray:function(){var t=this.firstSearchString;try{var e=JSON.parse(t);if(e.length)return e}catch(Qa){}return[t]}},methods:{emptySearchString:function(){this.checkedRows=[],this.onChange("")},uncheckRow:function(t,e){var a=this;$(e.target).addClass("removing"),setTimeout((function(){e.stopPropagation();a.$refs.simpleTable;var n=Object.keys(a.checkedRows[0].row)[1],i=a.checkedRows.filter((function(e){return e.row[n]!=t}));a.checkedRows=i,a.onChange(i,"remove",t),$(e.target).removeClass("removing")}),300)},simpleTableSearchString:function(t){var e=t||this.searchString,a=!1;try{if(a=JSON.parse(e),!a.length)return e}catch(Qa){return e}if(a)return""},contextListKeyUp:function(){var t=this.$refs.desde.value,e=this.$refs.hasta.value,a="";""!=t&&""==e&&(a=">= "+t),""==t&&""!=e&&(a="<= "+e),""!=t&&""!=e&&(a=t==e?"= "+t:t+" - "+e),this.onChange(a)},contextListButton:function(t){"empty"==t&&this.onChange('""'),"filled"==t&&this.onChange("_")},contextListRowClick:function(t){},contextListCheckClick:function(t){var e,a,n=contextList.checkedRows.map((function(t){return t.row})),i=t.map((function(t){return t[Object.keys(t)[1]]})),r=n.map((function(t){return t[Object.keys(t)[1]]})),s="none";t.length>n.length&&(s="add"),t.length<n.length&&(s="remove"),e=r.filter((function(t){return!i.includes(t)}))[0],a=e,contextList.checkedRows=t.map((function(t){return{row:t,i:t._rowIndex}})),this.onChange(t,s,a)},contextListSearch:function(t){t[0]},updateContext:function(t){this.searchTimer&&clearTimeout(this.searchTimer);var e=this;this.searchTimer=setTimeout((function(){e.openContextParameters.searchString=e.searchString,e.reloadContext()}),300)},reloadContext:function(){this.open(this.openContextParameters,!0)},open:function(t,e){var a=t.keyName,n=t.$field,i=t.val,r=t.type,s=t.onChange,o=t.cb,c=t.singlecheck,l=t.pkName,d=t.dbname,u=t.ownername,h=t.tablename,f=t.fieldname,p=t.dbID,m=t.searchString,g=t.cbWhenClose,v=t.qeParam;this.openContext(a,n,i,r,s,o,c,{pkName:l,dbname:d,ownername:u,tablename:h,fieldname:f,dbID:p,searchString:m,cbWhenClose:g,qeParam:v},e)},openContext:function(t,e,a,n,i,r,s,o,c){var l=this,d=o.pkName,u=o.dbname,h=o.ownername,f=o.tablename,p=o.fieldname,m=o.dbID,g=o.searchString,v=o.cbWhenClose,b=o.qeParam;this.openContextParameters={keyName:t,$field:e,val:a,type:n,onChange:i,cb:r,singlecheck:s,pkName:d,dbname:u,ownername:h,tablename:f,fieldname:p,dbID:m,searchString:g,cbWhenClose:v,qeParam:b},this.qeParam=b,this.singlecheck=s,this.searchString=g,c||(this.firstSearchString=g,this.contextListFocused=!0),this.onChange=function(t,e,a){i(t,e,a),setTimeout(l.positionContext,0)},this.$field=e;var x=this;x.rows=[];var w=b.list;if(w){var y,_,S=function(){e.offset().top,e.outerHeight(),e.offset().left;var t=I(x.firstSearchString,y);x.rows=y,x.hiddenKeys=_,x.checkedRows=t,x.searchable=!0,H("list")};if(w.length){var k=w.map((function(t){return{id:t[0],Literal:t[1]}}));y=k,_=["id"],S()}else{var C=w.sqlListGrid,O=w.connection,N=C.toLowerCase(),T=N.substring(N.indexOf("select")+6,N.indexOf("from")).trim().split(","),P=N.substring(N.indexOf("from")+4,N.indexOf("where")).trim(),L=N.substring(N.indexOf("where")+5,N.indexOf("order by")).trim(),M=N.substring(N.indexOf("order by")+8).trim(),q={operation:"select",columns:T,schemaSyntax:P,whereSyntax:L,orderbyColumns:M,dbID:O};window.working(1),this.api.$dbq(q,(function(t){y=t,_=[T[0]],S(),window.working(0)}))}}else{var j=Nt(a),E=(j.leftVal,j.operator);if(E?-1!=E.indexOf(">")?(x.leftVal=j.val1,x.rightVal=""):-1!=E.indexOf("<")?(x.leftVal="",x.rightVal=j.val1):(x.leftVal=j.val1,x.rightVal=j.val1):(x.leftVal=j.val1,x.rightVal=j.val2),"text"==n&&p){var F=this.simpleTableSearchString();F=""==F?"":" AND ".concat(p," LIKE '%").concat(F,"%' ");var V={operation:"request",sqlSyntax:"SELECT distinct top 20  1 AS _ROW_NUMBER,".concat(p," FROM ").concat(b.table_full_name," AS [").concat(b.table_alias,"] WHERE ").concat(p," IS NOT NULL AND ").concat(p," <> '' ").concat(F," ORDER BY ").concat(p),dbID:m};window.working(1),this.api.$dbq(V,(function(t){x.rows=t,x.checkedRows=I(x.firstSearchString,t),x.hiddenKeys=["_ROW_NUMBER"],window.working(0)}),!0,!0),this.searchable=!1,n="list"}H(n)}var z=this;function I(t,e){var a=[];try{var n=JSON.parse(t);e.forEach((function(t,e){-1!=n.indexOf(t[Object.keys(t)[1]])&&a.push({row:t,i:e})}))}catch(Qa){}return a}function H(t){e.offset().top,e.outerHeight(),e.offset().left,$(x.$refs.contextList).addClass("shown");x.type=t,x.opened=!0,x.positionContext(),$("body").click(D),r&&r()}function D(t){var e=document.activeElement,a=$(e).closest("#circusContextList").length||$(t.target).closest("#circusContextList").length;if(!a&&!z.contextListFocused){var n=$(z.$refs.contextList);n.removeClass("shown"),x.opened=!1,$("body").off(),v&&v()}}},positionContext:function(t){if(contextList.opened&&this.$field){var e=$(window).width(),a=$(window).height(),n=this.$field.offset().top+this.$field.outerHeight(),i=this.$field.offset().left,r=i>e/2&&e-i-this.$field.outerWidth(),s=a-n-20;if(contextList.top=n,contextList.left=i,contextList.right=r,contextList.maxheight=s,t&&$.contains(t.target,this.$field[0])){var o=c(this.$field,$(t.target));o?$(this.$refs.contextList).addClass("shown"):$(this.$refs.contextList).removeClass("shown")}}function c(t,e){var a=e.offset().top,n=a+e.height(),i=t.offset().top,r=i+t.height();return r<=n&&i>=a}},closeContext:function(){this.contextListFocused=!1}}},jt=qt,Et=Object(_t["a"])(jt,pt,mt,!1,null,null,null),Ft=Et.exports,Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ly",{attrs:{flexbox:"1"}},t._l(t.buttons,(function(e){return a("ly",[a("button",{staticClass:"btn btn-primary btn-xs",staticStyle:{border:"none",outline:"none"},attrs:{disabled:e.disabled,title:e.title,"data-help-code":e.helpCode,value:e.label},domProps:{innerHTML:t._s(e.label)},on:{click:function(a){return t.onClick(e)}}})])})),1)},zt=[],It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.itemClasses},[t._t("default")],2)},Ht=[],Dt=a("ade3"),Rt={props:["grow","overflow","breakHeight","flexbox","column","height","shrink","wrap"],computed:{isContainer:function(){return this.flexbox},baseClassName:function(){return this.isContainer?"LyBox":"LyItem"},itemClasses:function(){var t,e=this.baseClassName,a=(t={},Object(Dt["a"])(t,e,1),Object(Dt["a"])(t,e+"-grow",this.grow),Object(Dt["a"])(t,e+"-overflow",this.overflow),Object(Dt["a"])(t,e+"-breakHeight",this.breakHeight),Object(Dt["a"])(t,e+"-column",this.column),Object(Dt["a"])(t,e+"-height",this.height),Object(Dt["a"])(t,e+"-shrink",this.shrink),Object(Dt["a"])(t,e+"-wrap",this.wrap),t);return a}}},Bt=Rt,At=Object(_t["a"])(Bt,It,Ht,!1,null,null,null),Jt=At.exports,Kt={props:{buttons:{type:Array,required:!0}},methods:{onClick:function(t){t.onClick(t.label)}},components:{Ly:Jt}},Ut=Kt,Wt=(a("31ba"),Object(_t["a"])(Ut,Vt,zt,!1,null,"4919e585",null)),Qt=Wt.exports,Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Ly",{attrs:{"data-component":"Containers",height:"1",flexbox:"1"}},t._l(t.containers,(function(e){return a("Ly",{style:t.containerWidth,attrs:{grow:"1",height:"1","data-overflow":t.containerType(e)}},[a("Ly",{attrs:{flexbox:"1",column:"1",height:"1"}},[a("Ly",{staticStyle:{padding:"0 0 0px 0px","border-bottom":"1px solid #999"},attrs:{flexbox:"1"}},t._l(t.toolbarButtons(e),(function(n,i){return a("div",{class:{pestanaVentana:!0,pestanaVentanaSelected:-1!=t.visibleVentanas(e).indexOf(i)},on:{click:n.onClick}},[a("div",{staticClass:"botonLabel",attrs:{contenteditable:"false"},on:{dblclick:function(e){return t.editWindowName(e.target,i)},blur:function(e){return t.saveWindowName(e.target,i)}}},[t._v(t._s(n.label))]),"+"!=n.label?a("div",{staticClass:"close closeButton",staticStyle:{cursor:"default"},on:{click:function(t){return t.stopPropagation(),n.onClose(t)}}}):t._e()])})),0),a("Ly",{staticStyle:{position:"relative"},attrs:{grow:"1",height:"1",overflow:t.containerType(e)}},t._l(t.ventanasDelContainer(e),(function(n){return a("Ventana",{directives:[{name:"show",rawName:"v-show",value:-2!=t.visibleVentanas(e).indexOf(n.index),expression:"visibleVentanas ( container ).indexOf(ventana.index)!=-2"}],key:n.index,staticClass:"window-container",style:t.styleVentana(e,-1!=t.visibleVentanas(e).indexOf(n.index)),attrs:{visible:t.selectedIndex==n.index,ventana:n,isInline:t.isInlineContainer(e),index:n.index,switchVentana:t.onButtonClick,panels:t.panels},on:{panelSwitch:t.panelSwitch}})})),1)],1)],1)})),1)},Zt=[],Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Ly",{ref:"Ventana",staticStyle:{},attrs:{flexbox:"1",column:"1",grow:"1",height:"1","data-component":"Ventana","data-layout":t.isInline?"inline":"default"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.admin,expression:"admin"}],staticStyle:{width:"100%",padding:"5px 5px"}},[a("div",{staticClass:"toolbar-box"},[a("div",{staticClass:"toolbar-box-title"},[t._v("Navegación")]),t.parentTablesWindows.length?a("select",{ref:"parentTable",staticClass:"form-control",staticStyle:{display:"inline",width:"auto","font-size":"11px","margin-top":"2px"},attrs:{"data-help-code":"ventana-toolbar-parents"},on:{change:function(e){return t.injectParent()}}},[a("option",[t._v("Padres...")]),t._l(t.parentTablesWindows,(function(e){return a("option",{domProps:{value:e.index}},[t._v(t._s(e.name))])}))],2):t._e(),t.childTablesWindows.length?a("select",{ref:"childTable",staticClass:"form-control",staticStyle:{display:"inline",width:"auto","font-size":"11px"},attrs:{"data-help-code":"ventana-toolbar-childs"},on:{change:function(e){return t.injectChild()}}},[a("option",[t._v("Hijos...")]),t._l(t.childTablesWindows,(function(e){return a("option",{domProps:{value:e.index}},[t._v(t._s(e.name))])}))],2):t._e()]),a("div",{staticClass:"toolbar-box"},[a("div",{staticClass:"toolbar-box-title"},[t._v("Tabla Principal")]),a("select",{staticClass:"form-control",staticStyle:{display:"inline",width:"auto","font-size":"11px","margin-bottom":"-2px","margin-top":"1px"},on:{change:function(e){return t.tableChange(e)}}},t._l(t.availableTables,(function(e){return a("option",{domProps:{value:e[0],selected:e[0]==t.ventana.data.table?"selected":""}},[t._v(t._s(e[1].table_alias))])})),0)]),a("div",{staticClass:"toolbar-box"},[a("div",{staticClass:"toolbar-box-title"},[t._v("Paneles")]),a("Toolbar",{staticStyle:{width:"auto",float:"left",margin:"0px 0 -2px 3px"},attrs:{buttons:t.buttons2}})],1),a("div",{staticClass:"toolbar-box"},[a("div",{staticClass:"toolbar-box-title"},[t._v("Archivo de Configuración")]),a("select",{ref:"configFileSelect",staticClass:"form-control",staticStyle:{display:"inline",width:"auto","font-size":"11px","margin-bottom":"-2px","margin-top":"1px",float:"left"},attrs:{id:"configFileSelect"}},[a("option",{attrs:{value:""}},[t._v("Archvos de Config...")]),t._l(t.configFilesList,(function(e){return a("option",{domProps:{value:e,selected:e==t.api.parsedSearch.reset}},[t._v(t._s(e))])}))],2),a("Toolbar",{staticStyle:{width:"auto",float:"left",margin:"0px 0 -2px 3px"},attrs:{buttons:t.buttons}})],1),a("div",{staticClass:"toolbar-box"},[a("div",{staticClass:"toolbar-box-title"},[t._v("Salir")]),a("button",{on:{click:function(e){return t.logout()}}},[t._v("SALIR")])])]),a("div",{staticStyle:{display:"flex","flex-grow":"1",height:"calc(100% - 0px)","max-height":"calc(100% - 50px)",position:"relative"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.panels.form&&t.admin,expression:"panels.form&&admin"}],ref:"Formulario",staticClass:"panel-envelope",staticStyle:{height:"100%",border:"0px solid red"}},[a("Formulario",{staticStyle:{"min-width":"150px",background:"#f4f4f4",padding:"0px"},attrs:{item:t.form.data,onFilter:t.formFilter,overflow:t.overflow,keysSettings:t.keysSettings,ventanaIndex:t.evaluatedVentana.index,ventanaTable:t.evaluatedVentana.data.table,fields:t.evaluatedFieldsOfVentana.fields,visible:t.visible}})],1),a("Ly",{directives:[{name:"show",rawName:"v-show",value:t.list,expression:"list"}],staticClass:"slots panel-envelope",staticStyle:{"flex-grow":"1"},attrs:{grow:"1",breakHeight:"1",shrink:"1"}},[a("Listado",{ref:"listado",staticStyle:{background:"#f4f4f4",padding:"5px","box-sizing":"border-box"},attrs:{rows:t.ventana.data.list.data,ventana:t.evaluatedVentana,filter:t.formFilterState.data,overflow:t.overflow,formSetValues:t.formSetValues,keysSettings:t.keysSettings},on:{rowClick:t.rowClick}})],1)],1)])},Yt=[],te=(a("a630"),a("94be"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Ly",{staticStyle:{border:"0 solid #ddd","border-width":"0 0px 0 0"},attrs:{flexbox:"1",column:"1",height:"1","data-component":"Formulario"}},[a("div",{class:{"star-row-favorited":t.verSoloFavoritos},staticStyle:{display:"flex","flex-wrap":"nowrap"}},[a("div",{staticClass:"star-row",staticStyle:{width:"25px","padding-top":"3px",zoom:"0.9"},on:{click:function(e){t.verSoloFavoritos=!t.verSoloFavoritos}}},[a("div",{staticStyle:{"margin-top":"2px"}},[a("img",{staticClass:"full-star",attrs:{src:"images/filled-star.svg"}}),a("img",{staticClass:"empty-star",attrs:{src:"images/empty-star.svg"}})])]),a("div",{staticStyle:{width:"12px","margin-top":"4px"}},[a("input",{attrs:{type:"checkbox","data-help-code":"campos-ruta-mostrar"},domProps:{checked:t.showPath},on:{click:function(e){t.showPath=e.target.checked}}})]),a("div",{staticStyle:{padding:"3px","margin-left":"0px",width:"calc(100% - 15px)"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"form-control",attrs:{placeholder:"Buscar..."},domProps:{value:t.filter},on:{focus:function(t){return t.target.select()},input:function(e){e.target.composing||(t.filter=e.target.value)}}})])]),a("div",{staticStyle:{position:"relative",left:"calc(100% - 50px)",top:"-20px",height:"0",overflow:"visible","font-size":"9px",color:"gray"}},[t._v(t._s(t.shownNumber)+" / "+t._s(Object.keys(t.formState.editorData).length))]),a("div",{staticClass:"LyItem LyItem-grow LyItem-overflow",staticStyle:{padding:"0"},on:{scroll:function(e){return t.positionContext(e)}}},[a("GridFields",{ref:"gridfields",attrs:{objeto:t.formState.editorData,fields:t.fields,"data-component":"Formulario",indexVentana:t.ventanaIndex,filter:t.filterForGrid,showFields:t.showFields,showPath:t.showPath,verSoloFavoritos:t.verSoloFavoritos,visible:t.visible},on:{change:t.formChange,clickLabel:t.clickLabel,focusField:t.focusField,filter:t.updateShownNumber,addField:t.addField}})],1)])}),ee=[],ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{ref:"tabla"},t._l(t.shallowFields,(function(e,n){return a("tr",{directives:[{name:"show",rawName:"v-show",value:t.fieldsWithFilter[n].inFilter&&(!t.verSoloFavoritos||t.fieldsMap[t.fields[n].field_full_name].favorite),expression:"fieldsWithFilter[index].inFilter && (!verSoloFavoritos || fieldsMap[fields[index].field_full_name].favorite)"}],key:n,class:{"star-row-favorited":t.fieldsMap[t.fields[n].field_full_name].favorite},staticStyle:{display:"block","margin-bottom":"2px"},on:{click:function(a){return t.addField(a,e,t.tab)}}},[a("td",{staticClass:"star-row",staticStyle:{"margin-top":"-2px"},on:{click:function(a){return a.stopPropagation(),t.favorite(e,n)}}},[a("img",{staticClass:"full-star",attrs:{src:"images/filled-star.svg"}}),a("img",{staticClass:"empty-star",attrs:{src:"images/empty-star.svg"}})]),t.showPath?a("td",{staticClass:"highlight-text"},[t._v(t._s(t.fields[n].table_alias))]):t._e(),a("td",{staticClass:"highlight-text highlight-text-strong",domProps:{innerHTML:t._s(t.fields[n].label)},on:{dblclick:function(e){return t.editFieldName(e.target)},blur:function(a){return t.saveFieldName(a.target,e)}}})])})),0)},ne=[],ie=(a("a9e3"),{components:{},props:{objeto:{type:Object,required:!0},branchs:Array,lists:Array,filter:String,showFields:Boolean,showPath:Boolean,indexVentana:Number,verSoloFavoritos:Boolean,fields:Array,visible:Boolean},data:function(){return{tab:"main",validations:{label:function(t){return!0}},fieldsMap:JSON.cc(this.$store.state.fieldsMap)}},watch:{visible:function(t,e){t&&(this.fieldsMap=JSON.cc(this.$store.state.fieldsMap))}},computed:{fieldsWithFilter:function(){var t=this;if(!this.fields)return[];var e=0;this.fields.forEach((function(a){t.inFilter(a)?(t.verSoloFavoritos&&!a.favorite||e++,a.inFilter=1):a.inFilter=0}));var a=this.fields;return this.$emit("filter",e),a},shallowFields:function(){var t=this,e=this.objeto,a=Object.keys(e).filter((function(a){return null==e[a]||"object"!=Object(o["a"])(e[a])||t.listFor(a)})),n=a.map((function(a){var n=JSON.cc(e[a]),i=a,r=t.fieldType(a),s=t.listTextForValue(n,a);return{name:i,value:n,type:r,text:s}}));return n}},methods:{addField:function(t,e,a){var n=this.objeto;Object.keys(n).forEach((function(t){n[t]=""}));var i=this.assignModel({target:{value:"%"}},e,a);this.$emit("addField",i)},assignModel:function(t,e,a){var n=this,i=t.target.value;if(!this.isContentValid(i,e,a))return alert("El contenido del campo no es valido."),!1;var r="multiple"==e.type?new select(i).getValues():i,s=e.name,o=Object(Dt["a"])({},s,r),c=JSON.cc(this.objeto);Object.assign(c,o);var l=-1;return Object.keys(c).forEach((function(t,e){var a=c[t];c[t]={value:a,text:n.listTextForValue(a,s)},s==t&&(l=e)})),l},saveFieldName:function(t,e){this.$store.commit("database_setLiteral",{key:e,literal:$(t).text()}),$(t).attr("contenteditable",!1)},editFieldName:function(t){$(t).attr("contenteditable",!0).focus()},focusTextField:function(t,e){""==t.target.value&&(this.objeto[e.name]="%"),t.target.select(),this.utils.setTextareaHeight(t.target),this.$emit("focusField",$(t.currentTarget))},labelClick:function(t){return!1},inFilter:function(t){if(!this.filter||""==this.filter)return!0;var e=new RegExp(this.filter.toLowerCase(),"gi"),a=t.label.toLowerCase().match(e),n=t.label.toLowerCase().match(e),i=null!=a||null!=n;return i},elementStyle:function(t){if(!this.keysSettings)return{};var e=this.keysSettings[t.name],a=!!e&&e.readOnly,n=a?{"z-index":-1}:{};return n},isContentValid:function(t,e,a){var n=this.fieldValidation(e,a),i=!n||n(t);return i},branch:function(t){return"main"==t?this.objeto:this.objeto[t]},fieldType:function(t){var e=this.listFor(t);return e?e.multiple?"multiple":"textarea":"boolean"==typeof this.objeto[t]?"boolean":"textarea"},listTextForValue:function(t,e){var a=this.listFor(e);if(!a||!a.values||!a.values.filter)return t;var n=a.values.filter((function(e){return e[0]==t}))[0],i=!!n&&n[1];return i},listFor:function(t){if(!this.keysSettings)return!1;var e=this.keysSettings[t],a=!!e&&e.list;return!(!a||!a.values.length)&&a},listOptions:function(t){var e=t.name,a=this.keysSettings[e].list.values;return a},listFor_old:function(t){if(!this.lists)return!1;var e=this.lists.filter((function(e){return e.key==t}))[0];return e||!1},listOptions_old:function(t){var e=t.name,a=this.lists.filter((function(t){return t.key==e}))[0].values;return a},fieldValidation:function(t,e){var a=!1;if("main"==e&&(e=void 0),e)try{a=this.validations[e][t.name]}catch(Qa){}else try{a=this.validations[t.name]}catch(Qa){}return a},favorite:function(t,e){var a=JSON.cc(this.fields[e]);this.fieldsMap[a.field_full_name].favorite=this.fieldsMap[a.field_full_name].favorite?0:1,this.$store.commit("set_favoriteToField",a)}},beforeUpdate:function(){},updated:function(){},mounted:function(){}}),re=ie,se=(a("14c0"),Object(_t["a"])(re,ae,ne,!1,null,"48de9c34",null)),oe=se.exports,ce={components:{GridFields:oe,Toolbar:Qt,Ly:Jt},data:function(){return{showToolbar:!1,verSoloFavoritos:!1,buttons:[{label:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 44 44"><g><circle cx="20" cy="20" r="7"></circle><path d="m22,0c-12.2,0-22,9.8-22,22s9.8,22 22,22 22-9.8 22-22-9.8-22-22-22zm12.7,33.3l-1.4,1.4c-0.4,0.4-1,0.4-1.4,0l-5.4-5.4c-0.2-0.2-0.4-0.2-0.6-0.1-1.7,1.1-3.7,1.7-5.9,1.7-6.1,0-11-4.9-11-11s4.9-11 11-11 11,4.9 11,11c0,2.2-0.6,4.2-1.7,5.9-0.1,0.2-0.1,0.5 0.1,0.6l5.4,5.4c0.3,0.5 0.3,1.1-0.1,1.5z"></path></g></svg>',onClick:this.filter,helpCode:"form-toolbar-filter"},{label:'<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 330.5 330.5" style="enable-background:new 0 0 330.5 330.5;" xml:space="preserve"><path d="M178.3,136.6l16.4,16.4l69.7-69.7c2.3-2.3,3.4-5.2,3.4-8.2c0-3-1.1-5.9-3.4-8.2c-4.5-4.5-11.8-4.5-16.4,0L178.3,136.6z\t M172.3,140.2l-0.7-0.7l-12.4,12.4l-7.7,7.7l20.4,20.4l8.3-8.3l11.8-11.8l-0.9-0.9l-1.2-1.2l-16.4-16.4L172.3,140.2z M66.8,197.2\tc-0.1,0-0.2,0.1-0.3,0.1c-0.5,0.1-0.9,0.3-1.3,0.6l-0.2,0.1L65,198c-0.5,0.3-0.8,0.7-1.2,1.2c-0.3,0.5-0.6,1-0.8,1.6\tc-0.5,1.7-0.3,3.7,1.3,4.9c3.8,3,7.7,6,11.6,8.9l0.7-0.3l1.7-0.7L80,213l14.1-5.4l20.6-7.9l-14.3,16.6l-8,9.2l-1.1,1.3l-1.1,1.3\tl-1.1,1.3c0.8,0.3,1.6,0.4,2.5,0.2c0.5-0.1,1-0.3,1.6-0.5c0.1,0,0.1-0.1,0.2-0.1c0.6-0.3,1.1-0.5,1.7-0.7l3.3,3.3\tc0,0.8-0.1,1.5-0.1,2.3c-0.1,0.7-0.1,1.5-0.2,2.2c-0.1,1.1-0.3,2.2-0.6,3.3c-0.6,2.5,0.8,5.7,3.5,6.2c4.4,0.9,8,2.4,11.1,4.5\tc3.5,2.4,6.4,5.4,9.1,9.1c1.3,1.8,2.6,3.6,3.9,5.6c1,1.6,2.6,2.3,4.1,2.3c0.7,0,1.4-0.1,2-0.4c2.4-0.9,4.2-3.4,3.1-6.2l32.3-75.5\tl-20.2-20.2L66.8,197.2z M165.2,330.5L165.2,330.5C74,330.5,0,256.5,0,165.2v0C0,74,74,0,165.2,0h0c91.3,0,165.2,74,165.2,165.2v0\tC330.5,256.5,256.5,330.5,165.2,330.5z"></path></svg>',onClick:this.clean,helpCode:"form-toolbar-clear"}],formState:{data:function(){return this.formStateData(JSON.cc(this.item))}.bind(this)(),editorData:this.item},filter:"",filterForGrid:"",shownNumber:0,focusedKeyName:"",showFields:!1,showPath:!1}},props:["item","fields","onFilter","overflow","keysSettings","ventanaIndex","ventanaTable","visible"],watch:{item:function(t,e){this.formState.editorData=t,this.formState.data=this.formStateData(t)},filter:function(){var t=this;this.filterTimeout&&clearTimeout(this.filterTimeout),this.filterTimeout=setTimeout((function(){t.filterForGrid=t.filter}),300)}},computed:{},mounted:function(){var t=$(this.$refs.Formulario);t.width(t.width())},updated:function(){},methods:{positionContext:function(t){window.contextList.positionContext(t)},contextListKeyUp:function(t){var e=JSON.cc(this.formState),a=this.focusedKeyName;e.editorData[a]=t,e.data[a]={value:t,text:t},this.formState=e},contextListRowClick:function(t){},contextListCheckClick:function(t){var e=JSON.cc(this.formState),a=this.focusedKeyName,n=JSON.stringify(t.map((function(t){return t[Object.keys(t)[1]]})));e.editorData[a]=n,e.data[a]={value:n,text:n},this.formState=e},updateShownNumber:function(t){this.shownNumber=t},shownNumber_old:function(){var t=0;return this.$refs.gridfields&&(t=this.$refs.gridfields.shownNumber),t},clickLabel:function(t){var e=this.$store.state.selectedQuery,a=e.name,n=t.find("input").add(t.find("select")),i=t.find("label").text(),r="{{"+a+"|"+i+"}}";n.val(r),this.formState.editorData[i]=r,this.formState.data[i].text=r,this.formState.data[i].value=r},focusField:function(t){var e=t.attr("id"),a=t.val(),n=this.utils.getBasicDataType(this.keysSettings[e].data_type);this.focusedKeyName=e,window.contextList.openContext(e,t,a,n,this.contextListCheckClick)},filterState:function(){var t=this,e=this.formState.data,a={};return Object.keys(e).forEach((function(n,i){var r="string"==typeof e[n].value||"number"==typeof e[n].value?e[n].value.toString():"",s=t.keysSettings&&t.keysSettings[n]?t.keysSettings[n].data_type:null,o=(t.keysSettings&&t.keysSettings[n]&&t.keysSettings[n].list,t.api.getListModel(n)),c=!(!o||!o.length)&&{values:o},l=e[n].text,d=new RegExp("{{.*|.*}}","gi"),u=r.match(d),h="",f="";if(null!=u){var p=u[0].replace("{{","").replace("}}","").split("|");h=p[0],f=p[1]}c&&(s="varchar",l=r),r&&""!=r&&(a[n]={value:r,data_type:s,text:l,vista:h,campo:f,list:c,index:i})})),a},formStateData:function(t){var e={},a=JSON.cc(t);return Object.keys(a).forEach((function(t){var n=a[t];e[t]={value:n,text:n}})),JSON.cc(e)},setQuery:function(){this.clean();var t=this.formState.editorData,e=this.$store.state.selectedQuery,a=e.queryEditor.params;Object.keys(a).forEach((function(e){var n=a[e].value;t[e]=n})),this.formState.data=this.formStateData(t)},filter_old:function(){this.onFilter(this.filterState()),this.clean()},clean:function(){var t=this.formState.data,e={},a={};Object.keys(t).forEach((function(t){e[t]={value:"",text:""},a[t]=""}));var n=JSON.cc(this.formState);n.data=e,n.editorData=a,this.formState=n},addField:function(t){this.onFilter(t)},formChange:function(t){this.formState.data=t,window.contextList.closeContext()},loadFields:function(){}}},le=ce,de=(a("1ffc"),Object(_t["a"])(le,te,ee,!1,null,"598a9c74",null)),ue=de.exports,he=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Ly",{ref:"listado",staticClass:"qe",staticStyle:{padding:"0"},attrs:{flexbox:"1",column:"1",grow:"1",height:"1","data-component":"Listado"}},[a("div",{staticStyle:{position:"absolute",top:"0",left:"0",width:"5px",height:"100vh",background:"transparent","z-index":"1000"},on:{mouseover:function(e){return t.showFormulario()}}}),a("Series",{ref:"popup",attrs:{operation:t.series.operation,fields:t.series_parameters},on:{operate:t.operate_serie}}),a("div",{staticStyle:{width:"100%",display:"block","min-height":"40px",padding:"0px 0",background:"#f4f4f4",margin:"0"}},[a("div",{ref:"toolbar",staticStyle:{float:"left",display:"block",padding:"0px",width:"550px"}},[a("div",{staticClass:"toolbar-box toolbar1"},[a("div",{staticClass:"toolbar-box-title",staticStyle:{"margin-top":"-7px"}}),a("Toolbar",{staticStyle:{float:"left"},attrs:{buttons:t.admin?t.buttons:t.buttonsUser}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.admin,expression:"admin"}],staticClass:"toolbar-box"},[a("div",{staticClass:"toolbar-box-title",staticStyle:{"margin-top":"-7px"}},[t._v("Vistas")]),a("Toolbar",{staticStyle:{float:"left"},attrs:{buttons:t.buttonsVistas}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.admin,expression:"admin"}],staticClass:"toolbar-box"},[a("div",{staticClass:"toolbar-box-title",staticStyle:{"margin-top":"-7px"}},[t._v("Series")]),a("select",{staticClass:"form-control",staticStyle:{width:"auto","margin-top":"-0px","font-size":"11px",float:"left","margin-left":"10px"},attrs:{"data-help-code":"list-toolbar-series-operation"},on:{change:function(e){t.series.operation=e.target.value}}},[a("option",{attrs:{value:"Sobreescribir"}},[t._v("Sobreescribir")]),a("option",{attrs:{value:"Vaciar"}},[t._v("Vaciar")])]),a("button",{staticClass:"btn btn-primary btn-xs",staticStyle:{background:"transparent",border:"0",float:"left",outline:"none","box-shadow":"none"},attrs:{"data-help-code":"list-toolbar-series-run"},on:{click:function(e){return t.open_serie(e)}}},[a("svg",{staticStyle:{"enable-background":"new 0 0 256 256"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 256 256","xml:space":"preserve"}},[a("path",{attrs:{d:"M0,128C0,57.3,57.3,0,128,0s128,57.3,128,128s-57.3,128-128,128S0,198.7,0,128z M172.8,68.3c1.2-10.2-6.8-19.1-17.1-19.1\n\t\t            \t        \tc-8.7,0-16.1,6.6-17.1,15.2c-0.5,4.6,0.8,9.1,3.6,12.7C151.6,88.9,171,83.6,172.8,68.3z M78.3,207.2c3.3-2.5,3.5-3.7,12.2-18.6\n\t\t            \t        \tc0,0,0-0.1,0.1-0.1c0,0,0,0-0.1,0c4.5-7.7,10.5-18.2,19.1-32.7c0.7,0.4,14.2,6,19.9,9.7c-6.5,4-15.1,9.6-21.3,13.4\n\t\t            \t        \tc-10,6-4.4,18.7,4.1,18c4.1-0.3,4.9-1.2,20.4-8.9c7.3-3.6,14.8-7.3,20.7-10.9c4.9-2.9,10.9-12.3,3.3-18.9L133.1,142\n\t\t            \t        \tc5.9-11.3,11.6-21.7,17.4-31.8c19.8,5.7,40.1-0.7,55.2-21.7c5.7-7.9,1.2-15.2-5.1-15.2c-10.4,0-10.2,17.3-32.7,17.3\n\t\t            \t        \tc-10.7,0-18.5-4.3-28.1-10C118,67.5,90,76.3,75.9,96.1c-8.5,11.8,4.5,22.6,12.8,11c7.8-10.9,17.6-15,29.1-12\n\t\t            \t        \tc-5.2,9.1-52.1,97.7-52.8,99.3C59.9,204.8,71.5,212.3,78.3,207.2z"}})])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.admin,expression:"admin"}],staticClass:"toolbar-box"},[a("div",{staticClass:"toolbar-box-title",staticStyle:{"margin-top":"-7px"}},[t._v("Customm")]),t._l(t.custom_buttons,(function(e){return a("button",{staticClass:"btn btn-primary btn-xs",staticStyle:{background:"transparent",border:"0",float:"left",outline:"none","box-shadow":"none"},attrs:{title:e.label,"data-help-code":""},on:{click:function(a){return t.custom_button_click(e.onclick)}}},[a("img",{staticStyle:{width:"21px",opacity:"0.5"},attrs:{src:e.image_src}})])}))],2)]),a("div",{staticStyle:{float:"right",display:"block"}},[t._v(t._s(t.grid.loadedRecsNumber)+"/"+t._s(t.grid.rowCount))])]),a("div",{ref:"qeContainer",staticClass:"bgqe",staticStyle:{position:"relative",border:"0 solid #ddd","max-height":"80%","border-width":"0px 0 1px 0","margin-top":"5px","margin-left":"-5px",width:"calc(100% + 10px)"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.show.queryEditor,expression:"show.queryEditor"}],staticStyle:{height:"100%",overflow:"auto",padding:"5px 0","min-height":"47px"}},[a("Queryeditor",{ref:"qe",attrs:{params:t.qeParams,dbID:t.api.getTableConnectionId(t.ventana.data.table)},on:{paramUpdate:t.qeParamUpdate,paramDelete:t.paramDelete}})],1)]),a("div",{class:{"computer-container":!0,sorting:!t.grid.rows.length,"computer-container-advanced":t.showAdvanced}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.qeParams.length,expression:"qeParams.length"}],staticStyle:{width:"25px",float:"left","padding-top":"77px",position:"relative","z-index":"1"}},[a("button",{staticStyle:{border:"1px solid #ddd",height:"23px"},attrs:{"data-help-Code":"show-advanced-params"},on:{click:function(e){return t.extendParams()}}},[t._v("+")])]),a("div",{ref:"computer",staticStyle:{display:"flex",width:"",padding:"0 0 0 25px",position:"absolute","white-space":"nowrap",border:"0px solid #ccc","border-top-width":"5px"}},t._l(t.grid.columns.names,(function(e,n){return t.qeParams[n]?a("div",{key:"cont_"+e.label,ref:"computed_"+e.label,refInFor:!0,staticClass:"header-cell",attrs:{type:t.getParam(n).basic_data_type,param:JSON.stringify(t.getParam(n))}},[a("div",{staticStyle:{display:"flex",width:"100%","flex-direction":"column"}},[a("div",{staticClass:"cell-title",staticStyle:{clear:"both",float:"none","font-weight":"normal",padding:"4px 24px 4px 8px",width:"100%",background:"#898F99","border-radius":"10px",color:"white","text-align":"center"},attrs:{contenteditable:"true",title:"Renómbralo haciendo doble click."},on:{dblclick:function(e){return t.editAlias(e,n)},blur:function(e){return t.saveAlias(e,n)}}},[t._v(" "+t._s(t.getParam(n).alias)+" ")]),a("button",{directives:[{name:"show",rawName:"v-show",value:t.admin,expression:"admin"}],staticClass:"close closeButton",staticStyle:{float:"right","margin-top":"-18px","margin-bottom":"5px","margin-left":"calc(100% - 18px)",zoom:"1.1"},attrs:{"data-help-code":"search-parameter-close"},on:{click:function(e){return t.deleteParam(n)}}})]),a("div",{staticStyle:{position:"relative",border:"0px solid #ddd","border-width":"0 0 0 0",padding:"2px 4px 3px 5px","white-space":"nowrap","margin-top":"0px",clear:"both",float:"none:width:100%",height:"24px",top:"3px"}},[a("div",{staticClass:"button-operation",staticStyle:{position:"absolute",cursor:"pointer",border:"0px solid blue",top:"3px","z-index":"1000",zoom:"1.1","margin-left":"-1px"}},[a("svg",{directives:[{name:"show",rawName:"v-show",value:"number"==t.getParam(n).basic_data_type,expression:"getParam(i).basic_data_type=='number'"}],class:{hidden:"SUM"!=t.getParam(n).aggregate_function},staticStyle:{color:"red",zoom:"0.6",float:"left","margin-top":"-2px"},attrs:{title:"SUMA",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512.002 512.002","xml:space":"preserve"},on:{click:function(e){return t.clickFunc("SUM",e,n)}}},[a("g",[a("g",[a("path",{staticStyle:{background:"blue"},attrs:{d:"M437.108,74.898c-99.869-99.858-262.345-99.858-362.214,0c-99.858,99.858-99.858,262.34,0,362.203\t\t\tc49.934,49.929,115.521,74.896,181.107,74.896s131.173-24.967,181.107-74.896C536.966,337.243,536.966,174.762,437.108,74.898z\t\t\t M373.067,166.895c0,9.229-7.484,16.707-16.707,16.707s-16.707-7.478-16.707-16.707v-16.826H191.01l77.923,95.294\t\t\tc5.036,6.15,5.036,14.975,0,21.126l-77.923,95.204h148.643v-16.588c0-9.229,7.484-16.707,16.707-16.707\t\t\tc9.223,0,16.707,7.478,16.707,16.707v33.414c0,9.229-7.601,16.588-16.824,16.588H155.758c-6.45,0-12.334-3.66-15.098-9.491\t\t\tc-2.762-5.835-1.926-12.713,2.164-17.705l91.585-111.926L142.825,144.06c-4.09-4.992-4.927-11.959-2.164-17.795\t\t\tc2.762-5.83,8.648-9.61,15.098-9.61h200.485c9.223,0,16.824,7.597,16.824,16.826V166.895z"}})])]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("svg",{directives:[{name:"show",rawName:"v-show",value:"number"==t.getParam(n).basic_data_type,expression:"getParam(i).basic_data_type=='number'"}],class:{hidden:"AVG"!=t.getParam(n).aggregate_function},staticStyle:{"enable-background":"new 0 0 512 512",zoom:"0.6",float:"left","margin-top":"-2px"},attrs:{title:"MEDIA",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512","xml:space":"preserve"},on:{click:function(e){return t.clickFunc("AVG",e,n)}}},[a("g",[a("g",[a("path",{attrs:{d:"M155.804,205.902c-27.625,0-50.098,22.473-50.098,50.098s22.473,50.098,50.098,50.098\t\t\tc28.788,0,52.979-23.076,77.68-50.098C208.782,228.978,184.593,205.902,155.804,205.902z"}})])]),a("g",[a("g",[a("path",{attrs:{d:"M356.196,205.902c-28.788,0-52.979,23.076-77.68,50.098c24.7,27.022,48.891,50.098,77.68,50.098\t\t\tc27.625,0,50.098-22.473,50.098-50.098S383.821,205.902,356.196,205.902z"}})])]),a("g",[a("g",[a("path",{attrs:{d:"M256,0C114.844,0,0,114.839,0,256s114.844,256,256,256s256-114.839,256-256S397.156,0,256,0z M356.196,339.496\t\t\tc-41.465,0-71.896-27.919-100.196-58.632c-28.3,30.713-58.73,58.632-100.196,58.632c-46.042,0-83.496-37.454-83.496-83.496\t\t\tc0-46.042,37.454-83.496,83.496-83.496c41.465,0,71.896,27.919,100.196,58.632c28.3-30.713,58.73-58.632,100.196-58.632\t\t\tc46.042,0,83.496,37.454,83.496,83.496C439.692,302.042,402.238,339.496,356.196,339.496z"}})])]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("svg",{class:{hidden:"DISTINCT"!=t.getParam(n).aggregate_function},staticStyle:{"enable-background":"new 0 0 512 512",zoom:"0.6",float:"left","margin-top":"-2px"},attrs:{title:"Número de valores distintos",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512","xml:space":"preserve"},on:{click:function(e){return t.clickFunc("DISTINCT",e,n)}}},[a("g",[a("g",[a("path",{attrs:{d:"M256,0C114.844,0,0,114.839,0,256s114.844,256,256,256s256-114.839,256-256S397.156,0,256,0z M389.594,317.231H244.592\n\t\t\tl-40.125,90.281c-2.772,6.219-8.872,9.92-15.275,9.92c-2.261,0-4.567-0.468-6.773-1.446c-8.425-3.745-12.221-13.612-8.48-22.043\n\t\t\tl34.094-76.712h-85.627c-9.219,0-16.699-7.475-16.699-16.699c0-9.225,7.48-16.699,16.699-16.699h100.471l29.688-66.797H122.406v0\n\t\t\tc-9.219,0-16.699-7.475-16.699-16.699c0-9.225,7.48-16.699,16.699-16.699h145.002l40.125-90.281\n\t\t\tc3.751-8.42,13.579-12.236,22.049-8.474c8.425,3.745,12.221,13.612,8.48,22.043l-34.094,76.712h85.627\n\t\t\tc9.219,0,16.699,7.475,16.699,16.699s-7.48,16.699-16.699,16.699H289.124l-29.688,66.797h130.159\n\t\t\tc9.219,0,16.699,7.475,16.699,16.699C406.294,309.756,398.813,317.231,389.594,317.231z"}})])]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("div",{staticStyle:{float:"none",clear:"both"}})]),a("span",{staticStyle:{top:"-1px",float:"left","padding-left":"17px",position:"relative"}},[t._v("-")]),a("div",{staticStyle:{float:"none",clear:"both"}})]),a("div",{staticStyle:{display:"flex",width:"100%"}},[a("div",{staticStyle:{border:"0px solid red",width:"auto","flex-grow":"1"}},[a("button",{staticStyle:{padding:"0",border:"0",width:"20px",height:"15px"},attrs:{"data-help-code":"search-parameter-active"},on:{click:function(e){return t.activateParam(n,e)}}},[a("svg",{directives:[{name:"show",rawName:"v-show",value:t.qeParams[n]._active,expression:"qeParams[i]._active"}],staticStyle:{"enable-background":"new 0 0 470 470"},style:{height:"12px","margin-bottom":"-1px","margin-left":"-2px",fill:t.qeParams[n]._active?"blue":""},attrs:{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 470 470","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M162.5,102.5c0-39.977,32.523-72.5,72.5-72.5s72.5,32.523,72.5,72.5V160h30v-57.5C337.5,45.981,291.519,0,235,0\t\tS132.5,45.981,132.5,102.5V160h30V102.5z"}}),t._v(" "),a("rect",{attrs:{x:"77.5",y:"190",width:"315",height:"280"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("svg",{directives:[{name:"show",rawName:"v-show",value:!t.qeParams[n]._active,expression:"!qeParams[i]._active"}],staticStyle:{"enable-background":"new 0 0 470 470"},style:{height:"12px","margin-bottom":"-1px","margin-left":"-2px",fill:t.qeParams[n]._active?"blue":""},attrs:{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 470 470","xml:space":"preserve"}},[a("g",[a("rect",{attrs:{x:"137.5",y:"190",width:"315",height:"280"}}),t._v(" "),a("path",{attrs:{d:"M192.5,102.5V160h30v-57.5C222.5,45.981,176.519,0,120,0S17.5,45.981,17.5,102.5V190h30v-87.5\t\tC47.5,62.523,80.023,30,120,30S192.5,62.523,192.5,102.5z"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")])]),a("button",{staticStyle:{padding:"0","border-left-color":"transparent","box-shadow":"none",border:"0",width:"20px"},attrs:{"data-help-code":"search-parameter-order"},on:{click:function(e){return t.setNewOrder(n)}}},[a("svg",{directives:[{name:"show",rawName:"v-show",value:"asc"!=t.qeParams[n]._orderby&&"desc"!=t.qeParams[n]._orderby,expression:"qeParams[i]._orderby!='asc'&&qeParams[i]._orderby!='desc'"}],staticStyle:{"enable-background":"new 0 0 427.484 427.484"},style:{height:"10px","margin-bottom":"0px","margin-left":"-2px"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"427.484px",height:"427.484px",viewBox:"0 0 427.484 427.484","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M405.943,290.254L302.096,425.338c-1.04,1.354-2.66,2.146-4.374,2.146c-1.702,0-3.321-0.798-4.368-2.146L189.511,290.254\t\tc-0.769-0.993-1.144-2.176-1.144-3.357c0-1.152,0.364-2.329,1.108-3.322c1.499-1.975,4.125-2.707,6.434-1.809l68.76,27.166V21.01\t\tc0-3.047,2.477-5.503,5.515-5.503h55.106c3.038,0,5.509,2.456,5.509,5.503v287.922l68.76-27.166\t\tc2.305-0.898,4.93-0.166,6.419,1.809C407.473,285.561,407.461,288.28,405.943,290.254z M238.012,143.913\t\tc0.744-0.993,1.105-2.167,1.105-3.322c0-1.176-0.379-2.367-1.142-3.36L134.125,2.148C133.081,0.792,131.458,0,129.759,0\t\tc-1.714,0-3.328,0.798-4.377,2.148L21.539,137.23c-1.519,1.969-1.525,4.69-0.03,6.683c1.487,1.968,4.114,2.707,6.419,1.803\t\tl68.766-27.163v287.919c0,3.05,2.462,5.509,5.506,5.509h55.109c3.041,0,5.515-2.459,5.515-5.509V118.552l68.763,27.163\t\tC233.886,146.62,236.51,145.88,238.012,143.913z"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("svg",{directives:[{name:"show",rawName:"v-show",value:"asc"==t.qeParams[n]._orderby,expression:"qeParams[i]._orderby=='asc'"}],staticStyle:{"enable-background":"new 0 0 442.91 442.91"},style:{fill:"blue",height:"11px","margin-bottom":"0px","margin-left":"-2px"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 442.91 442.91","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M13.98,196.395c8.45,4.662,19.232,1.457,23.894-6.993l9.907-17.775c0.583,0,1.457,0.291,2.331,0.291h119.469\t\tc0.583,0,1.457,0,2.04,0l8.742,17.483c3.205,6.119,9.324,9.616,15.735,9.616c2.622,0,5.245-0.583,7.867-2.04\t\tc8.742-4.371,11.947-14.861,7.576-23.602L128.495,9.616c-2.914-5.828-8.742-9.324-15.152-9.616c-6.411,0-12.53,3.497-15.735,9.033\t\tl-90.33,163.76C2.616,181.243,5.53,191.733,13.98,196.395z M112.178,54.781l41.668,82.171H66.721L112.178,54.781z M25.635,413.188\t\tl120.052-124.714H38.165c-9.616,0-17.483-7.867-17.483-17.483c0-9.616,7.867-17.483,17.483-17.483h148.608\t\tc6.993,0,13.404,4.079,16.026,10.781c2.622,6.411,1.457,13.987-3.497,18.94L79.251,407.943h107.522\t\tc9.616,0,17.483,7.867,17.483,17.483s-7.867,17.483-17.483,17.483H38.165c-6.993,0-13.404-4.079-16.026-10.781\t\tC19.225,425.718,20.682,418.433,25.635,413.188z M294.586,377.639V84.502c0-9.616,7.867-17.483,17.483-17.483\t\ts17.483,7.867,17.483,17.483V327.52l77.218-97.615c6.119-7.576,16.9-8.742,24.477-2.914c7.576,6.119,8.742,16.901,2.914,24.477\t\tL325.765,388.42c-3.497,4.371-8.45,6.702-13.695,6.702c-2.04,0-3.788-0.291-5.828-0.874\t\tC299.249,391.625,294.586,385.215,294.586,377.639z"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("svg",{directives:[{name:"show",rawName:"v-show",value:"desc"==t.qeParams[n]._orderby,expression:"qeParams[i]._orderby=='desc'"}],staticStyle:{"enable-background":"new 0 0 440.87 440.87"},style:{fill:"blue",height:"11px","margin-bottom":"0px","margin-left":"-2px"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 440.87 440.87","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M19.605,17.483C19.605,7.867,27.473,0,37.089,0h148.608c6.993,0,13.404,4.079,16.026,10.781\t\tc2.622,6.411,1.457,13.987-3.497,18.94L78.174,154.436h107.522c9.616,0,17.483,7.867,17.483,17.483s-7.867,17.483-17.483,17.483\t\tH37.089c-6.993,0-13.404-4.079-16.026-10.781c-2.622-6.411-1.457-13.987,3.497-18.94L144.611,34.967H37.089\t\tC27.473,34.967,19.605,27.099,19.605,17.483z M6.201,414.645l90.33-163.76c3.205-5.536,9.324-9.033,15.735-9.033\t\tc6.411,0,12.238,3.788,15.152,9.616l83.046,163.76c4.371,8.742,0.874,19.232-7.576,23.602c-2.622,1.166-5.245,2.04-7.867,2.04\t\tc-6.411,0-12.53-3.497-15.735-9.616l-8.742-17.483c-0.583,0-1.457,0-2.04,0H48.744c-0.874,0-1.457,0-2.331-0.291l-9.907,17.775\t\tc-4.662,8.45-15.444,11.656-23.894,6.993C4.453,433.585,1.539,423.095,6.201,414.645z M65.645,378.804h86.834l-41.668-82.171\t\tL65.645,378.804z M305.165,385.506c1.748,0.583,3.788,0.874,5.828,0.874c5.245,0,10.199-2.331,13.695-6.702l108.396-136.952\t\tc6.119-7.576,4.662-18.649-2.914-24.477c-7.576-6.119-18.649-4.662-24.477,2.914l-77.218,97.615V75.761\t\tc0-9.616-7.867-17.483-17.483-17.483c-9.616,0-17.483,7.867-17.483,17.483v293.136C293.51,376.473,298.172,382.884,305.165,385.506\t\tz"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")])]),a("button",{directives:[{name:"show",rawName:"v-show",value:t.qeParams[n]._active,expression:"qeParams[i]._active"}],staticStyle:{padding:"0",border:"0"},attrs:{"data-help-code":"search-parameter-negated"},on:{click:function(e){return t.negateParam(n)}}},[a("svg",{staticStyle:{"enable-background":"new 0 0 46 46"},style:{height:"11px","margin-bottom":"-1px","margin-left":"-2px",fill:-1!=t.qeParams[n].leftText.toLowerCase().indexOf("not")?"red":""},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"46px",height:"46px",viewBox:"0 0 46 46","xml:space":"preserve"}},[a("g",[a("g",[a("path",{attrs:{d:"M32.294,19H13.706c-2.209,0-4,1.791-4,4s1.791,4,4,4h18.588c2.209,0,4-1.791,4-4S34.503,19,32.294,19z"}}),t._v(" "),a("path",{attrs:{d:"M23,0C10.298,0,0,10.298,0,23c0,12.703,10.298,23,23,23s23-10.297,23-23C46,10.298,35.702,0,23,0z M23,40\t\t\tc-9.374,0-17-7.625-17-17c0-9.373,7.626-17,17-17s17,7.627,17,17C40,32.375,32.374,40,23,40z"}})])]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")])]),a("button",{staticStyle:{padding:"0",border:"0"},attrs:{"data-help-code":"search-parameter-list-config"},on:{click:function(e){return t.headerClick(n,e)}}},[a("svg",{staticStyle:{"enable-background":"new 0 0 512 512"},style:{height:"12px","margin-bottom":"-1px","margin-left":"-2px"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512","xml:space":"preserve"}},[a("g",[a("g",[a("path",{attrs:{d:"M499.844,328l-53.885-45.104C447.333,273.49,448,264.646,448,256s-0.667-17.49-2.042-26.896L499.844,184\t\t\tc3.979-3.323,4.99-9.021,2.396-13.51L453.177,85.51c-2.594-4.479-8.021-6.458-12.896-4.688l-65.906,24.083\t\t\tc-14.094-11.031-29.75-20.042-46.677-26.844l-12.125-69.24C314.677,3.719,310.24,0,305.063,0h-98.125\t\t\tc-5.177,0-9.615,3.719-10.51,8.823l-12.125,69.24c-16.927,6.802-32.583,15.813-46.677,26.844L71.719,80.823\t\t\tc-4.844-1.802-10.312,0.198-12.896,4.688L9.76,170.49c-2.594,4.49-1.583,10.188,2.396,13.51l53.885,45.104\t\t\tC64.667,238.51,64,247.354,64,256s0.667,17.49,2.042,26.896L12.156,328c-3.979,3.323-4.99,9.021-2.396,13.51l49.063,84.979\t\t\tc2.604,4.49,8.083,6.469,12.896,4.688l65.906-24.083c14.094,11.031,29.75,20.042,46.677,26.844l12.125,69.24\t\t\tc0.896,5.104,5.333,8.823,10.51,8.823h98.125c5.177,0,9.615-3.719,10.51-8.823l12.125-69.24\t\t\tc16.927-6.802,32.583-15.813,46.677-26.844l65.906,24.083c4.844,1.74,10.302-0.198,12.896-4.688l49.063-84.979\t\t\tC504.833,337.021,503.823,331.323,499.844,328z M256,362.667c-58.813,0-106.667-47.854-106.667-106.667\t\t\tS197.187,149.333,256,149.333S362.667,197.188,362.667,256S314.813,362.667,256,362.667z"}})])]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")])])])]),a("div",{class:{"search-field":!0,"search-field-inactive":!!t.qeParams[n]&&!t.qeParams[n]._active},attrs:{contentEditable:"true",title:t.getParamSearchString(n)},domProps:{innerHTML:t._s(t.getParamSearchString(n))},on:{keydown:function(e){t.keyDownSearchField(e,n)},keyup:function(e){return t.positionContext(e,n)},focus:function(e){return t.focusSearchField(e,n)},blur:function(e){return t.focusSearchField(e,n,!0)}}}),a("div",{staticClass:"clearfix"}),a("button",{directives:[{name:"show",rawName:"v-show",value:t.getParam(n)._active&&t.getParam(n)._extended,expression:"getParam(i)._active && getParam(i)._extended"}],staticStyle:{width:"17px",padding:"0 3px",background:"transparent",border:"0","font-size":"12px",float:"left","margin-top":"-2px","margin-right":"2px"},attrs:{"data-help-code":"search-parameter-operator"},domProps:{innerHTML:t._s("AND"==t.qeParams[n].operator?"Y":"O")},on:{click:function(e){return t.changeOperator(n)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.getParam(n)._active&&t.getParam(n)._extended,expression:"getParam(i)._active && getParam(i)._extended"}],staticClass:"side-text",staticStyle:{"font-weight":"bold",background:"white",float:"left",border:"1px solid #ddd","min-width":"20px"},attrs:{contenteditable:"true","data-help-code":"search-parameter-parentesis-left"},domProps:{innerHTML:t._s(t.qeParams[n].leftText)},on:{blur:function(e){return t.changeText(n,e,"leftText")},keyup:function(e){return t.textKeyPress(e,"leftText",n)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.getParam(n)._active&&t.getParam(n)._extended,expression:"getParam(i)._active && getParam(i)._extended"}],staticClass:"side-text",staticStyle:{"font-weight":"bold",background:"white",float:"left",border:"1px solid #ddd","min-width":"20px","min-height":"17px","margin-left":"10px"},attrs:{contenteditable:"true","data-help-code":"search-parameter-parentesis-right"},domProps:{innerHTML:t._s(t.qeParams[n].rightText)},on:{blur:function(e){return t.changeText(n,e,"rightText")},keyup:function(e){return t.textKeyPress(e,"rightText")}}}),a("div",{staticClass:"clearfix"})]):t._e()})),0)]),a("div",{staticStyle:{width:"100%",height:"5px",background:"#ccc"}}),a("Ly",{staticStyle:{position:"relative","padding-top":"0px"},attrs:{grow:"1"}},[a("SimpleTable",{ref:"Tabla",staticStyle:{background:"white"},attrs:{height:"100%",hiddenKeys:["PK_ID"],rows:t.grid.rows,overflow:"scroll",checkable:!0,checkedRows:t.checkedIndexes,selectable:!0,showHeaders:!1},on:{orderBy:t.orderBy,rowClick:t.rowClick,checkClick:t.checkClick,scrollHeaders:t.scrollHeaders,resizeHeaders:t.resizeHeaders,headerClick:t.headerClick}})],1)],1)},fe=[],pe=(a("c740"),a("2b3d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Tabs",{attrs:{tabs:t.tabs}},t._l(t.tabs,(function(e){return a("Ly",{attrs:{slot:e,flexbox:"1",column:"1",grow:"1"},slot:e},t._l(t.shallowFields(e),(function(n){return a("Ly",{directives:[{name:"show",rawName:"v-show",value:t.inFilter(n),expression:"inFilter(campo)"}],style:t.elementStyle(n)},[a("div",t._l(n.name.split("."),(function(e){return a("div",{staticStyle:{float:"left"}},[t._v(t._s(e))])})),0),a("label",{on:{click:function(e){return t.labelClick(e)}}},[t._v(t._s(n.name))]),"multiple"==n.type?a("select",{directives:[{name:"model",rawName:"v-model",value:n.value,expression:"campo.value"}],staticClass:"form-control",attrs:{multiple:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(n,"value",e.target.multiple?a:a[0])},function(a){return t.assignModel(a.target,n,e)}]}},[a("option",{attrs:{value:""}}),t._l(t.listOptions(n),(function(e){return a("option",{domProps:{value:e[0]}},[t._v(t._s(e[1]))])}))],2):"select"==n.type?a("select",{directives:[{name:"model",rawName:"v-model",value:n.value,expression:"campo.value"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(n,"value",e.target.multiple?a:a[0])},function(a){return t.assignModel(a.target.value,n,e)}]}},[a("option"),t._l(t.listOptions(n),(function(e){return a("option",{domProps:{value:e[0]}},[t._v(t._s(e[1]))])}))],2):"boolean"==n.type?a("input",{directives:[{name:"model",rawName:"v-model",value:n.value,expression:"campo.value"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(n.value)?t._i(n.value,null)>-1:n.value},on:{change:[function(e){var a=n.value,i=e.target,r=!!i.checked;if(Array.isArray(a)){var s=null,o=t._i(a,s);i.checked?o<0&&t.$set(n,"value",a.concat([s])):o>-1&&t.$set(n,"value",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(n,"value",r)},function(a){return t.assignModel(a.target.checked,n,e)}]}}):a("input",{directives:[{name:"model",rawName:"v-model",value:n.value,expression:"campo.value"}],staticClass:"form-control",domProps:{value:n.value},on:{blur:function(a){return t.assignModel(a.target.value,n,e)},input:function(e){e.target.composing||t.$set(n,"value",e.target.value)}}})])})),1)})),1)}),me=[],ge=a("1157"),ve=a.n(ge),be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("textarea",{directives:[{name:"resize",rawName:"v-resize"}]},[t._v(t._s(t.valor))])},xe=[],we={props:["valor"],directives:{resize:{inserted:function(t){var e=t.scrollHeight;if(e>0){var a=ve()(t).height()+e;t.style.height=a+"px",console.log(a)}}}}},ye=we,_e=Object(_t["a"])(ye,be,xe,!1,null,null,null),Se=_e.exports,ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{"data-component":"tabs"}},[t._l(t.tabsArr,(function(e){return t.tabsArr.length>1?a("button",{on:{click:function(a){return t.buttonClick(e)}}},[t._v(t._s(e.name))]):t._e()})),t._l(t.tabsArr,(function(e){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.name==t.selectedTab,expression:"tab.name == selectedTab"}],staticClass:"slot"},[t._t(e.name)],2)}))],2)},Ce=[],Oe={props:{tabs:{type:Array,required:!0}},data:function(){return{selectedTab:!1,beforeTabsArr:[]}},computed:{tabsArr:function(){var t=this.tabs.map((function(t,e){return{name:t,index:e}}));return this.beforeTabsArr!=t&&(this.selectedTab=this.tabs[0]),this.beforeTabsArr=t,t}},methods:{buttonClick:function(t){console.log(t.index),this.selectedTab=t.name}},beforeMount:function(){this.selectedTab=this.tabs[0]}},$e=Oe,Ne=(a("4400"),Object(_t["a"])($e,ke,Ce,!1,null,null,null)),Te=Ne.exports,Pe={components:{Ly:Jt,autosizeTextarea:Se,Tabs:Te},props:{item:{type:Object,required:!0},branchs:Array,lists:Array,filter:String,keysSettings:Object},data:function(){return{validations:{label:function(t){return!0}},objeto:JSON.cc(this.item)}},watch:{item:function(t,e){this.objeto=t}},computed:{branchKeys:function(){var t=this.branchs;return t?(t=t.map((function(t){return t.key})),{}):[]},tabs:function(){return["main"].concat(this.branchKeys)}},methods:{labelClick:function(t){var e=ve()(t.currentTarget).parent();this.$emit("clickLabel",e)},inFilter:function(t){if(!this.filter||""==this.filter)return!0;var e=-1!=t.name.toLowerCase().indexOf(this.filter.toLowerCase());return e},elementStyle:function(t){if(!this.keysSettings)return{};var e=this.keysSettings[t.name],a=!!e&&e.readOnly,n=a?{"z-index":-1}:{};return n},assignModel:function(t,e,a){var n=this;if(!this.isContentValid(t,e,a))return alert("El contenido del campo no es valido."),!1;var i="multiple"==e.type?new select(t).getValues():t,r=e.name,s=Object(Dt["a"])({},r,i),o=this.branch(a);Object.assign(o,s);var c=JSON.cc(this.objeto);Object.keys(c).forEach((function(t){var e=c[t];c[t]={value:e,text:n.listTextForValue(e,t)}})),this.$emit("change",c)},isContentValid:function(t,e,a){var n=this.fieldValidation(e,a),i=!n||n(t);return i},branch:function(t){return"main"==t?this.objeto:this.objeto[t]},shallowFields:function(t){var e=this,a=this.branch(t),n=Object.keys(a).filter((function(t){return null==a[t]||"object"!=Object(o["a"])(a[t])||e.listFor(t)})),i=n.map((function(t){var n=JSON.cc(a[t]),i=t,r=e.fieldType(t),s=e.listTextForValue(n,t);return{name:i,value:n,type:r,text:s}}));return i},fieldType:function(t){var e=this.listFor(t);return e?e.multiple?"multiple":"select":"boolean"==typeof this.objeto[t]?"boolean":"textarea"},listTextForValue:function(t,e){var a=this.listFor(e);if(!a||!a.values||!a.values.filter)return t;var n=a.values.filter((function(e){return e[0]==t}))[0],i=!!n&&n[1];return i},listFor:function(t){if(!this.keysSettings)return!1;var e=this.keysSettings[t],a=!!e&&e.list;return!(!a||!a.values.length)&&a},listOptions:function(t){var e=t.name,a=this.keysSettings[e].list.values;return a},listFor_old:function(t){if(!this.lists)return!1;var e=this.lists.filter((function(e){return e.key==t}))[0];return e||!1},listOptions_old:function(t){var e=t.name,a=this.lists.filter((function(t){return t.key==e}))[0].values;return a},fieldValidation:function(t,e){var a=!1;if("main"==e&&(e=void 0),e)try{a=this.validations[e][t.name]}catch(Qa){}else try{a=this.validations[t.name]}catch(Qa){}return a}},beforeUpdate:function(){}},Le=Pe,Me=(a("3e60"),Object(_t["a"])(Le,pe,me,!1,null,"18981f6d",null)),qe=Me.exports,je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{"data-component":"query-editor"}},[a("ol",{ref:"lista",staticStyle:{width:"100%"}},t._l(t.parameters.data,(function(e,n){return a("li",{staticClass:"param",attrs:{param:JSON.stringify(e),"data-active":e._active}},[a("span",{staticClass:"grippy"}),a("button",{directives:[{name:"show",rawName:"v-show",value:t.admin,expression:"admin"}],staticClass:"close closeButton",attrs:{"data-help-code":"search-parameter-close"},on:{click:function(e){return t.deleteParam(n)}}}),a("div",{staticClass:"parameter-toolbar",staticStyle:{"white-space":"nowrap",border:"1px solid #ddd",margin:"0px 0 0px 0",padding:"3px 1px"}},[a("button",{staticStyle:{padding:"0","border-left-color":"transparent"},attrs:{"data-help-code":"search-parameter-order"},on:{click:function(e){return t.setNewOrder(n)}}},[a("svg",{directives:[{name:"show",rawName:"v-show",value:"asc"!=e._orderby&&"desc"!=e._orderby,expression:"param._orderby!='asc'&&param._orderby!='desc'"}],staticStyle:{"enable-background":"new 0 0 427.484 427.484"},style:{height:"10px","margin-bottom":"0px","margin-left":"-2px"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"427.484px",height:"427.484px",viewBox:"0 0 427.484 427.484","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M405.943,290.254L302.096,425.338c-1.04,1.354-2.66,2.146-4.374,2.146c-1.702,0-3.321-0.798-4.368-2.146L189.511,290.254\t\tc-0.769-0.993-1.144-2.176-1.144-3.357c0-1.152,0.364-2.329,1.108-3.322c1.499-1.975,4.125-2.707,6.434-1.809l68.76,27.166V21.01\t\tc0-3.047,2.477-5.503,5.515-5.503h55.106c3.038,0,5.509,2.456,5.509,5.503v287.922l68.76-27.166\t\tc2.305-0.898,4.93-0.166,6.419,1.809C407.473,285.561,407.461,288.28,405.943,290.254z M238.012,143.913\t\tc0.744-0.993,1.105-2.167,1.105-3.322c0-1.176-0.379-2.367-1.142-3.36L134.125,2.148C133.081,0.792,131.458,0,129.759,0\t\tc-1.714,0-3.328,0.798-4.377,2.148L21.539,137.23c-1.519,1.969-1.525,4.69-0.03,6.683c1.487,1.968,4.114,2.707,6.419,1.803\t\tl68.766-27.163v287.919c0,3.05,2.462,5.509,5.506,5.509h55.109c3.041,0,5.515-2.459,5.515-5.509V118.552l68.763,27.163\t\tC233.886,146.62,236.51,145.88,238.012,143.913z"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("svg",{directives:[{name:"show",rawName:"v-show",value:"asc"==e._orderby,expression:"param._orderby=='asc'"}],staticStyle:{"enable-background":"new 0 0 442.91 442.91"},style:{fill:"blue",height:"11px","margin-bottom":"0px","margin-left":"-2px"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 442.91 442.91","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M13.98,196.395c8.45,4.662,19.232,1.457,23.894-6.993l9.907-17.775c0.583,0,1.457,0.291,2.331,0.291h119.469\t\tc0.583,0,1.457,0,2.04,0l8.742,17.483c3.205,6.119,9.324,9.616,15.735,9.616c2.622,0,5.245-0.583,7.867-2.04\t\tc8.742-4.371,11.947-14.861,7.576-23.602L128.495,9.616c-2.914-5.828-8.742-9.324-15.152-9.616c-6.411,0-12.53,3.497-15.735,9.033\t\tl-90.33,163.76C2.616,181.243,5.53,191.733,13.98,196.395z M112.178,54.781l41.668,82.171H66.721L112.178,54.781z M25.635,413.188\t\tl120.052-124.714H38.165c-9.616,0-17.483-7.867-17.483-17.483c0-9.616,7.867-17.483,17.483-17.483h148.608\t\tc6.993,0,13.404,4.079,16.026,10.781c2.622,6.411,1.457,13.987-3.497,18.94L79.251,407.943h107.522\t\tc9.616,0,17.483,7.867,17.483,17.483s-7.867,17.483-17.483,17.483H38.165c-6.993,0-13.404-4.079-16.026-10.781\t\tC19.225,425.718,20.682,418.433,25.635,413.188z M294.586,377.639V84.502c0-9.616,7.867-17.483,17.483-17.483\t\ts17.483,7.867,17.483,17.483V327.52l77.218-97.615c6.119-7.576,16.9-8.742,24.477-2.914c7.576,6.119,8.742,16.901,2.914,24.477\t\tL325.765,388.42c-3.497,4.371-8.45,6.702-13.695,6.702c-2.04,0-3.788-0.291-5.828-0.874\t\tC299.249,391.625,294.586,385.215,294.586,377.639z"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("svg",{directives:[{name:"show",rawName:"v-show",value:"desc"==e._orderby,expression:"param._orderby=='desc'"}],staticStyle:{"enable-background":"new 0 0 440.87 440.87"},style:{fill:"blue",height:"11px","margin-bottom":"0px","margin-left":"-2px"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 440.87 440.87","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M19.605,17.483C19.605,7.867,27.473,0,37.089,0h148.608c6.993,0,13.404,4.079,16.026,10.781\t\tc2.622,6.411,1.457,13.987-3.497,18.94L78.174,154.436h107.522c9.616,0,17.483,7.867,17.483,17.483s-7.867,17.483-17.483,17.483\t\tH37.089c-6.993,0-13.404-4.079-16.026-10.781c-2.622-6.411-1.457-13.987,3.497-18.94L144.611,34.967H37.089\t\tC27.473,34.967,19.605,27.099,19.605,17.483z M6.201,414.645l90.33-163.76c3.205-5.536,9.324-9.033,15.735-9.033\t\tc6.411,0,12.238,3.788,15.152,9.616l83.046,163.76c4.371,8.742,0.874,19.232-7.576,23.602c-2.622,1.166-5.245,2.04-7.867,2.04\t\tc-6.411,0-12.53-3.497-15.735-9.616l-8.742-17.483c-0.583,0-1.457,0-2.04,0H48.744c-0.874,0-1.457,0-2.331-0.291l-9.907,17.775\t\tc-4.662,8.45-15.444,11.656-23.894,6.993C4.453,433.585,1.539,423.095,6.201,414.645z M65.645,378.804h86.834l-41.668-82.171\t\tL65.645,378.804z M305.165,385.506c1.748,0.583,3.788,0.874,5.828,0.874c5.245,0,10.199-2.331,13.695-6.702l108.396-136.952\t\tc6.119-7.576,4.662-18.649-2.914-24.477c-7.576-6.119-18.649-4.662-24.477,2.914l-77.218,97.615V75.761\t\tc0-9.616-7.867-17.483-17.483-17.483c-9.616,0-17.483,7.867-17.483,17.483v293.136C293.51,376.473,298.172,382.884,305.165,385.506\t\tz"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")])]),a("button",{attrs:{"data-help-code":"search-parameter-list"},on:{click:function(a){t.parameters.data[n]._inlist=!e._inlist,t.emitParameters()}}},[a("svg",{directives:[{name:"show",rawName:"v-show",value:e._inlist,expression:"param._inlist"}],staticStyle:{"enable-background":"new 0 0 932.15 932.15"},style:{height:"13px","margin-bottom":"-2px","margin-left":"-2px",fill:"blue"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"932.15px",height:"932.15px",viewBox:"0 0 932.15 932.15","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M466.075,161.525c-205.6,0-382.8,121.2-464.2,296.1c-2.5,5.3-2.5,11.5,0,16.9c81.4,174.899,258.601,296.1,464.2,296.1\t\ts382.8-121.2,464.2-296.1c2.5-5.3,2.5-11.5,0-16.9C848.875,282.725,671.675,161.525,466.075,161.525z M466.075,676.226\t\tc-116.1,0-210.1-94.101-210.1-210.101c0-116.1,94.1-210.1,210.1-210.1c116.1,0,210.1,94.1,210.1,210.1\t\tS582.075,676.226,466.075,676.226z"}}),t._v(" "),a("circle",{attrs:{cx:"466.075",cy:"466.025",r:"134.5"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("svg",{directives:[{name:"show",rawName:"v-show",value:!e._inlist,expression:"!param._inlist"}],staticStyle:{"enable-background":"new 0 0 469.44 469.44"},style:{height:"13px","margin-bottom":"-2px","margin-left":"-2px"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 469.44 469.44","xml:space":"preserve"}},[a("g",[a("g",[a("g",[a("path",{attrs:{d:"M231.147,160.373l67.2,67.2l0.32-3.52c0-35.307-28.693-64-64-64L231.147,160.373z"}}),t._v(" "),a("path",{attrs:{d:"M234.667,117.387c58.88,0,106.667,47.787,106.667,106.667c0,13.76-2.773,26.88-7.573,38.933l62.4,62.4\t\t\t\tc32.213-26.88,57.6-61.653,73.28-101.333c-37.013-93.653-128-160-234.773-160c-29.867,0-58.453,5.333-85.013,14.933l46.08,45.973\t\t\t\tC207.787,120.267,220.907,117.387,234.667,117.387z"}}),t._v(" "),a("path",{attrs:{d:"M21.333,59.253l48.64,48.64l9.707,9.707C44.48,145.12,16.64,181.707,0,224.053c36.907,93.653,128,160,234.667,160\t\t\t\tc33.067,0,64.64-6.4,93.547-18.027l9.067,9.067l62.187,62.293l27.2-27.093L48.533,32.053L21.333,59.253z M139.307,177.12\t\t\t\tl32.96,32.96c-0.96,4.587-1.6,9.173-1.6,13.973c0,35.307,28.693,64,64,64c4.8,0,9.387-0.64,13.867-1.6l32.96,32.96\t\t\t\tc-14.187,7.04-29.973,11.307-46.827,11.307C175.787,330.72,128,282.933,128,224.053C128,207.2,132.267,191.413,139.307,177.12z"}})])])]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")])]),a("button",{directives:[{name:"show",rawName:"v-show",value:e._extended&&e._active,expression:"param._extended&&param._active"}],staticStyle:{width:"auto",padding:"0 3px"},attrs:{"data-help-code":"search-parameter-operator"},domProps:{innerHTML:t._s("AND"==e.operator?"Y":"O")},on:{click:function(e){return t.changeOperator(n)}}}),a("button",{directives:[{name:"show",rawName:"v-show",value:e._active,expression:"param._active"}],staticStyle:{padding:"0"},attrs:{"data-help-code":"search-parameter-negated"},on:{click:function(e){return t.negateParam(n)}}},[a("svg",{staticStyle:{"enable-background":"new 0 0 46 46"},style:{height:"11px","margin-bottom":"-1px","margin-left":"-2px",fill:-1!=e.leftText.toLowerCase().indexOf("not")?"red":""},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"46px",height:"46px",viewBox:"0 0 46 46","xml:space":"preserve"}},[a("g",[a("g",[a("path",{attrs:{d:"M32.294,19H13.706c-2.209,0-4,1.791-4,4s1.791,4,4,4h18.588c2.209,0,4-1.791,4-4S34.503,19,32.294,19z"}}),t._v(" "),a("path",{attrs:{d:"M23,0C10.298,0,0,10.298,0,23c0,12.703,10.298,23,23,23s23-10.297,23-23C46,10.298,35.702,0,23,0z M23,40\t\t\tc-9.374,0-17-7.625-17-17c0-9.373,7.626-17,17-17s17,7.627,17,17C40,32.375,32.374,40,23,40z"}})])]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e._active&&e._extended,expression:"param._active && param._extended"}],staticClass:"side-text",staticStyle:{"font-weight":"bold"},attrs:{contenteditable:"true","data-help-code":"search-parameter-parentesis-left"},domProps:{innerHTML:t._s(e.leftText)},on:{blur:function(e){return t.changeText(n,e,"leftText")},keyup:function(e){return t.textKeyPress(e,"leftText",n)}}}),a("div",{staticClass:"highlight-text highlight-text-strong",attrs:{contenteditable:"true","data-help-code":"search-parameter-alias"},on:{blur:function(e){return t.editAliasName(n,e)}}},[t._v(t._s(e.alias))]),a("button",{staticStyle:{padding:"0",border:"0"},attrs:{"data-help-code":"search-parameter-active"},on:{click:function(e){return t.activateParam(t.parameters.data[n],e)}}},[a("svg",{directives:[{name:"show",rawName:"v-show",value:e._active,expression:"param._active"}],staticStyle:{"enable-background":"new 0 0 470 470"},style:{height:"12px","margin-bottom":"-1px","margin-left":"-2px",fill:e._active?"blue":""},attrs:{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 470 470","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M162.5,102.5c0-39.977,32.523-72.5,72.5-72.5s72.5,32.523,72.5,72.5V160h30v-57.5C337.5,45.981,291.519,0,235,0\t\tS132.5,45.981,132.5,102.5V160h30V102.5z"}}),t._v(" "),a("rect",{attrs:{x:"77.5",y:"190",width:"315",height:"280"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("svg",{directives:[{name:"show",rawName:"v-show",value:!e._active,expression:"!param._active"}],staticStyle:{"enable-background":"new 0 0 470 470"},style:{height:"12px","margin-bottom":"-1px","margin-left":"-2px",fill:e._active?"blue":""},attrs:{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 470 470","xml:space":"preserve"}},[a("g",[a("rect",{attrs:{x:"137.5",y:"190",width:"315",height:"280"}}),t._v(" "),a("path",{attrs:{d:"M192.5,102.5V160h30v-57.5C222.5,45.981,176.519,0,120,0S17.5,45.981,17.5,102.5V190h30v-87.5\t\tC47.5,62.523,80.023,30,120,30S192.5,62.523,192.5,102.5z"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e._active,expression:"param._active"}],staticClass:"highlight-text",attrs:{contenteditable:"true","data-help-code":"search-parameter-value"},domProps:{innerHTML:t._s(t.valueParam(e))},on:{blur:function(e){return t.editParameter(n,e)},focus:function(a){return t.openContext(n,a,e)},keyup:function(a){return t.positionContext(n,a,e)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e._active&&e._extended,expression:"param._active && param._extended"}],staticClass:"side-text",staticStyle:{"font-weight":"bold"},attrs:{contenteditable:"true","data-help-code":"search-parameter-parentesis-right"},domProps:{innerHTML:t._s(e.rightText)},on:{blur:function(e){return t.changeText(n,e,"rightText")},keyup:function(e){return t.textKeyPress(e,"rightText")}}}),a("button",{directives:[{name:"show",rawName:"v-show",value:e._active&&t.admin,expression:"param._active && admin"}],staticStyle:{width:"16px",border:"0"},attrs:{"data-help-code":"search-parameter-extend"},on:{click:function(a){t.parameters.data[n]._extended=!e._extended,t.emitParameters()}}},[a("div",{class:{"arrow-left":e._extended,"arrow-right":!e._extended},staticStyle:{display:"block",float:"left",zoom:"0.42","margin-top":"10px","margin-left":"8px",opacity:"0.5"}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:e._extendKey,expression:"param._extendKey"}],attrs:{contenteditable:"true","data-help-code":"search-parameter-key"},domProps:{innerHTML:t._s(e.key)},on:{blur:function(e){return t.editKeyName(n,e)}}}),a("button",{directives:[{name:"show",rawName:"v-show",value:e._extended,expression:"param._extended"}],staticStyle:{width:"16px",border:"0"},attrs:{"data-help-code":"search-parameter-extend-key"},on:{click:function(a){t.parameters.data[n]._extendKey=!e._extendKey,t.emitParameters()}}},[a("div",{class:{"arrow-left":e._extendKey,"arrow-right":!e._extendKey},staticStyle:{display:"block",float:"left",zoom:"0.42","margin-top":"10px","margin-left":"8px",opacity:"0.5"}})])])})),0)])},Ee=[],Fe=(a("6062"),{components:{},props:{params:[Array],dbID:String},data:function(){return{admin:this.api.parsedSearch.admin,parameters:{data:JSON.cc(this.params)},focusedParamIndex:-1}},watch:{params:function(t,e){var a=JSON.cc(t);Object.keys(a).forEach((function(t){a[t].value="%"==a[t].value?"":a[t].value})),this.parameters.data=a}},computed:{settings:function(){var t=JSON.cc(this.parameters.data),e=new $t(JSON.cc(t),this.$store.state.queries),a=(e.getParams(),e.getSqlSyntax()),n=e.getWhereText(),i=e.getOrderBy(),r=e.getColumns(),s={sqlSyntax:a,params:t,whereText:n,columns:r,orderBy:i};return s}},mounted:function(){$(this.$refs.lista).sortable({handle:"span",stop:this.sortableStop,placeholder:"ui-state-highlight"})},methods:{positionContext:function(t,e,a){window.contextList.positionContext(),window.contextList.searchString=e.target.innerHTML,window.contextList.updateContext({searchString:e.target.innerHTML})},emitParameters:function(t){this.$emit("paramUpdate",JSON.cc(this.parameters.data))},openContext:function(t,e,a,n){var i=a.value;try{var r=JSON.parse(i);if("object"==Object(o["a"])(r)&&!r.length){r.sql,r.descripcion;return n&&n(),!1}}catch(Qa){}var s=a.reference,c=$(e.target).text(),l=a.data_type;this.focusedParamIndex=t;var d,u=a.table_catalog,h=a.table_schema,f=a.table_name,p=(a.table_config_keyname,a.key),m=c,g=this;a.listModel;d=a.table_pkname,window.contextList.openContext(s,$(e.target),c,l,g.contextListCheckClick,!1,!1,{pkName:d,dbname:u,ownername:h,tablename:f,fieldname:p,dbID:g.dbID,searchString:m,cbWhenClose:n,qeParam:a})},contextListCheckClick:function(t,e,a){var n,i,r=this.focusedParamIndex,s=this.parameters.data[r];if(s){if(t.map){i=t.map((function(t){return t[Object.keys(t)[1]]})),n=JSON.stringify(i);try{var o=JSON.parse(s.text),l=new Set(o);"add"==e?l=new Set(o.concat(i)):l.delete(a),n=JSON.stringify(Object(c["a"])(l))}catch(d){}}else n=t;"[]"==n&&(n=""),s.value=n,s.text=n,window.contextList.firstSearchString=n,this.emitParameters()}},deleteParam:function(t){this.parameters.data.splice(t,1),this.emitParameters(),this.$nextTick((function(){this.$emit("paramDelete",t)}))},activateParam:function(t,e){if(t._active=!t._active,this.emitParameters(),!e)return!1;var a=$(e.target).closest("li").find(".highlight-text");setTimeout((function(){return a.eq(1).focus()}),100)},negateParam:function(t){var e=this.parameters.data[t];-1!=e.leftText.toLowerCase().indexOf("not")?e.leftText=e.leftText.toLowerCase().replace("not",""):e.leftText="not"+e.leftText,this.emitParameters()},likeParam:function(t){this.parameters.data[t].like=this.parameters.data[t].like?!this.parameters.data[t].like:1,this.emitParameters()},valueParam:function(t){var e=t.value;try{var a=JSON.parse(e);if("object"!=Object(o["a"])(a)||a.length)return e;a.sql;var n=a.descripcion;return n}catch(Qa){return e}},setNewOrder:function(t){var e=["-","asc","desc"],a=this.parameters.data[t]._orderby,n=-1==e.indexOf(a)?0:e.indexOf(a),i=n+1>e.length-1?0:n+1,r=e[i];return this.parameters.data[t]._orderby=r,this.emitParameters(),r},setQuery:function(t){this.parameters.data=this.parameters.data.concat(t),this.emitParameters()},editKeyName:function(t,e){var a=JSON.cc(this.parameters.data);a[t].key=$(e.target).text(),this.parameters.data=a,this.emitParameters()},editAliasName:function(t,e){var a=JSON.cc(this.parameters.data);a[t].alias=$(e.target).text(),this.parameters=Object.assign(this.parameters,{data:a}),this.emitParameters()},sortableStop:function(t,e){var a=$(this.$refs.lista).find("li"),n=[];a.each((function(){n.push(JSON.parse($(this).attr("param")))})),$(this.$refs.lista).sortable("cancel"),this.parameters.data=n,this.emitParameters(),this.$emit("paramUpdate","resorted")},filter:function(){},formChange:function(t){},editParameter:function(t,e){var a=e.target,n=$(a).text(),i=this.parameters.data[t];i.value=n,i.text=n,window.contextList.closeContext(),this.emitParameters()},clear:function(){this.parameters.data=[]},changeOperator:function(t){var e=this.parameters.data[t].operator,a="AND"==e?"OR":"AND";this.parameters.data[t].operator=a,this.emitParameters()},changeType:function(t){var e=this.parameters.data[t].data_type,a="text"==e?"number":"number"==e?"date":"text";this.parameters.data[t].data_type=a,this.emitParameters()},changeText:function(t,e,a){var n=$(e.target).text();this.parameters.data[t][a]=n,this.parameters.data[t][a]=n,this.emitParameters()},extendParam:function(t){},textKeyPress:function(t,e,a){t.keyCode;var n=new RegExp(/[^not(]/g),i=new RegExp(/[^)]+/g),r="leftText"==e?n:i,s=$(t.target).text().replace(r,"");$(t.target).html()!=s&&$(t.target).html(s)}},updated:function(){}}),Ve=Fe,ze=(a("d295"),Object(_t["a"])(Ve,je,Ee,!1,null,"413074b1",null)),Ie=ze.exports,He=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"container",staticStyle:{display:"none",position:"absolute",margin:"-5px 0px 0 -5px",padding:"10px",width:"calc(100% - 16px)",height:"calc(100% - 17px)",background:"#f2f2f2",border:"1xp solid gray","z-index":"99999","box-sizing":"border-box"}},[a("div",{staticClass:"custom-title",staticStyle:{padding:"10px","font-size":"17px"}},[t._v(t._s(t.operation)+" serie de registros")]),a("br"),a("table",{staticStyle:{width:"100%"}},[a("tr",[t._m(0),a("td",{staticStyle:{width:"50%","text-align":"right",align:"right"}},[a("button",{staticClass:"btn btn-primary",staticStyle:{float:"right","margin-left":"20px"},on:{click:function(e){return t.hide()}}},[t._v("Cerrar")]),a("button",{staticClass:"btn btn-primary",staticStyle:{float:"right","margin-left":"20px"},on:{click:function(e){return t.clear()}}},[t._v("Borrar")]),a("button",{staticClass:"btn btn-primary",staticStyle:{float:"right","text-transform":"capitalize","margin-left":"20px"},on:{click:function(e){return t.operate()}}},[t._v(t._s(t.operation))])])])]),a("br"),a("div",{staticStyle:{overflow:"auto",height:"calc(100% - 120px)"}},[t._l(t.parameters,(function(e,n){return a("div",[a("label",{staticStyle:{"font-weight":"normal"}},[t._v(t._s(e.alias))]),a("Field",{staticStyle:{height:"24px",width:"400px"},attrs:{keyName:t.keyParam(e),type:e.type,singlecheck:!0,value:{value:e.series.replaceValue,text:e.text,paramIndex:n}},on:{input:t.setState}})],1)})),a("div",{staticStyle:{float:"none",clear:"both"}})],2)])},De=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("ul",[a("li",[t._v("- Sólo se pueden modificar campos de la tabla principal (los demás no se muestran en este formulario).")]),a("li",[t._v("- Actua sobre la serie de registros seleccionados.")]),a("li",[t._v("- Sólo altera el contenido de los campos aquí cumplimentados.")])])])}],Re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"container"},[a("textarea",{staticClass:"form-control",staticStyle:{height:"100%",width:"100%",resize:"none","font-size":"11px"},on:{keyup:function(e){t.internalValue.text=e.target.value,t.emitContent()},focus:function(e){return t.openContext(e)},blur:function(e){return t.closeContext()}}},[t._v(t._s(t.internalValue.text))])])},Be=[],Ae={components:{},props:{keyName:String,value:Object,type:String,singlecheck:Boolean},data:function(){return{internalValue:this.value}},computed:{},watch:{value:function(t,e){this.internalValue=t}},methods:{openContext:function(t){window.contextList.openContext(this.keyName,$(t.target),this.internalValue.value,this.type,this.contextListCheckClick,!1,this.singlecheck)},closeContext:function(t){window.contextList.closeContext()},contextListCheckClick:function(t){var e,a;if(t.map){var n=t[0];e=JSON.stringify(t.map((function(t){return t[Object.keys(t)[1]]}))),a=n[Object.keys(n)[0]]}else e=t,a=t;this.internalValue.text=e,this.internalValue.value=a,this.emitContent()},emitContent:function(){this.$emit("input",JSON.cc(this.internalValue))}}},Je=Ae,Ke=Object(_t["a"])(Je,Re,Be,!1,null,null,null),Ue=Ke.exports,We={components:{Field:Ue},props:{operation:String,fields:Array},data:function(){return{parameters:[]}},computed:{},watch:{fields:function(t,e){var a=this;t.forEach((function(t){a.clearParam(t);var e=a.keyParam(t);a.parameters.forEach((function(n){var i=a.keyParam(n);e==i&&a.copyParam(t,n)}))})),this.parameters=JSON.cc(t)}},methods:{show:function(){$(this.$refs.container).show()},hide:function(){$(this.$refs.container).hide()},clear:function(){var t=this;this.parameters.forEach((function(e){t.clearParam(e)}))},operate:function(){if(!confirm("Alterar la serie de registros?"))return!1;this.$emit("operate",this.parameters)},clearParam:function(t){t.value="",t.text="",t.series={},t.series.replaceValue=""},copyParam:function(t,e){t.value=e.value,t.text=e.text,t.series&&e.series&&(t.series.replaceValue=e.series.replaceValue)},keyParam:function(t){return t.reference?t.reference:t.key},setState:function(t){t=JSON.cc(t);var e=this.parameters[t.paramIndex];e.text=t.text,e.series||(e.series={}),e.series.replaceValue=t.value}}},Qe=We,Ge=Object(_t["a"])(Qe,He,De,!1,null,null,null),Ze=Ge.exports,Xe={components:{ItemEditor:qe,SimpleTable:kt,Queryeditor:Ie,Toolbar:Qt,Ly:Jt,Series:Ze},props:{multiline:String,ventana:Object,filter:Array,overflow:Boolean,formSetValues:Function,keysSettings:Object,resetVentana:Function},data:function(){var t=this;return{showAdvanced:!1,series:{operation:"sobreescribir"},checkedIndexes:[],admin:this.api.parsedSearch.admin,show:{queryEditor:!1},selected_pk_id:"",selected_row:"",custom_buttons:this.api.$buttonsForTable(this.ventana.data.table),buttons:[{label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 44 44"><g><circle cx="20" cy="20" r="7"></circle><path d="m22,0c-12.2,0-22,9.8-22,22s9.8,22 22,22 22-9.8 22-22-9.8-22-22-22zm12.7,33.3l-1.4,1.4c-0.4,0.4-1,0.4-1.4,0l-5.4-5.4c-0.2-0.2-0.4-0.2-0.6-0.1-1.7,1.1-3.7,1.7-5.9,1.7-6.1,0-11-4.9-11-11s4.9-11 11-11 11,4.9 11,11c0,2.2-0.6,4.2-1.7,5.9-0.1,0.2-0.1,0.5 0.1,0.6l5.4,5.4c0.3,0.5 0.3,1.1-0.1,1.5z"></path></g></svg>',onClick:function(){return t.loadPage()},helpCode:"list-toolbar-loadpage"},{label:'<svg data-help-code="list-toolbar-clear" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 330.5 330.5"><path d="M178.3 136.6l16.4 16.4 69.7-69.7c2.3-2.3 3.4-5.2 3.4-8.2 0-3-1.1-5.9-3.4-8.2 -4.5-4.5-11.8-4.5-16.4 0L178.3 136.6zM172.3 140.2l-0.7-0.7 -12.4 12.4 -7.7 7.7 20.4 20.4 8.3-8.3 11.8-11.8 -0.9-0.9 -1.2-1.2 -16.4-16.4L172.3 140.2zM66.8 197.2c-0.1 0-0.2 0.1-0.3 0.1 -0.5 0.1-0.9 0.3-1.3 0.6l-0.2 0.1L65 198c-0.5 0.3-0.8 0.7-1.2 1.2 -0.3 0.5-0.6 1-0.8 1.6 -0.5 1.7-0.3 3.7 1.3 4.9 3.8 3 7.7 6 11.6 8.9l0.7-0.3 1.7-0.7L80 213l14.1-5.4 20.6-7.9 -14.3 16.6 -8 9.2 -1.1 1.3 -1.1 1.3 -1.1 1.3c0.8 0.3 1.6 0.4 2.5 0.2 0.5-0.1 1-0.3 1.6-0.5 0.1 0 0.1-0.1 0.2-0.1 0.6-0.3 1.1-0.5 1.7-0.7l3.3 3.3c0 0.8-0.1 1.5-0.1 2.3 -0.1 0.7-0.1 1.5-0.2 2.2 -0.1 1.1-0.3 2.2-0.6 3.3 -0.6 2.5 0.8 5.7 3.5 6.2 4.4 0.9 8 2.4 11.1 4.5 3.5 2.4 6.4 5.4 9.1 9.1 1.3 1.8 2.6 3.6 3.9 5.6 1 1.6 2.6 2.3 4.1 2.3 0.7 0 1.4-0.1 2-0.4 2.4-0.9 4.2-3.4 3.1-6.2l32.3-75.5 -20.2-20.2L66.8 197.2zM165.2 330.5L165.2 330.5C74 330.5 0 256.5 0 165.2v0C0 74 74 0 165.2 0h0c91.3 0 165.2 74 165.2 165.2v0C330.5 256.5 256.5 330.5 165.2 330.5z"/></svg>',onClick:function(){if(!confirm("¿Borrar los parámetros de filtrado?"))return!1;this.$store.commit("Ventana_injectQE",{indexVentana:this.ventana.index,qeParams:[]}),this.$refs.qe.clear(),this.clearSimpleTable()}.bind(this)},{label:'<svg data-help-code="list-toolbar-excel" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M371.5 128h-67.6L256 198.5 208.1 128h-67.6l81.1 121.2L130.1 384h131.1v-45.8h-30.3l25.1-37.5 55.7 83.3h70.2l-91.5-134.8L371.5 128zM512 256c0 141.4-114.6 256-256 256S0 397.4 0 256 114.6 0 256 0 512 114.6 512 256z"/></svg>',onClick:function(){this.downloadListAsFile()}.bind(this)},{label:'<svg data-help-code="list-toolbar-excel" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M371.5 128h-67.6L256 198.5 208.1 128h-67.6l81.1 121.2L130.1 384h131.1v-45.8h-30.3l25.1-37.5 55.7 83.3h70.2l-91.5-134.8L371.5 128zM512 256c0 141.4-114.6 256-256 256S0 397.4 0 256 114.6 0 256 0 512 114.6 512 256z"/></svg>',onClick:function(){this.editRecord()}.bind(this)}],buttonsVistas:[{label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" style="transform:rotate(180deg)"><path d="M180.52,149v33.92H76.75V149H56.81v43.9a10,10,0,0,0,10,10H190.47a10,10,0,0,0,10-10V149H180.52Zm-48.3-3.08c3.39-3.38,27.68-35.63,27.68-35.63s4.3-4.29-1.41-4.29H143.63V56.41s0.06-2.06-2.6-2.06H118.39c-3.69,0-3,2.45-3,2.45V107H99.25c-4.71,0-.37,4.1-0.37,4.1l28.55,34.5S129.78,148.37,132.22,145.92ZM128,256h0A128,128,0,0,1,0,128H0A128,128,0,0,1,128,0h0A128,128,0,0,1,256,128h0A128,128,0,0,1,128,256Z"></path></svg>',helpCode:"list-toolbar-loadvista",onClick:function(){var t=this.$store.state.selectedQuery,e=JSON.cc(t.queryEditor.params),a=this.$store.getters.qeParams(this.ventana.index);a||(a=[]),this.clearSimpleTable(),this.$store.commit("Ventana_injectQE",{indexVentana:this.ventana.index,qeParams:a.concat(e)})}.bind(this)},{label:'<svg data-help-code="list-toolbar-savevista" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M180.52,149v33.92H76.75V149H56.81v43.9a10,10,0,0,0,10,10H190.47a10,10,0,0,0,10-10V149H180.52Zm-48.3-3.08c3.39-3.38,27.68-35.63,27.68-35.63s4.3-4.29-1.41-4.29H143.63V56.41s0.06-2.06-2.6-2.06H118.39c-3.69,0-3,2.45-3,2.45V107H99.25c-4.71,0-.37,4.1-0.37,4.1l28.55,34.5S129.78,148.37,132.22,145.92ZM128,256h0A128,128,0,0,1,0,128H0A128,128,0,0,1,128,0h0A128,128,0,0,1,256,128h0A128,128,0,0,1,128,256Z"></path></svg>',onClick:function(){if(!confirm("¿Crear una vista con este filtro?"))return!1;var t=this.ventana.data.table,e=JSON.cc(this.$refs.qe.settings),a=JSON.cc(this.orderby),n=this.tablesRelation,i=n.joinSyntax,r=(new Date).valueOf().toString(),s={table:t,joinSyntax:i,queryEditor:e,orderby:a};this.api.getIdentitiesForTableSet(t,function(t){s.identities=t,s.whereSql=this.grid.whereSql,s.name=r,s.customName="",s.tableNames=n.names,s.descripcion="",s.fecha=this.utils.getSpDate(new Date),s.tipo="Normal",this.$store.commit("Query_add",{query:s,cb:function(t){console.log(t),window.circus.loadQueries(),window.circus.showHelpBox({title:"Vista creada",text:"Se ha creado una nueva vista con el filtro actual."},!0)}})}.bind(this))}.bind(this)}],grid:{rows:[],rowCount:0,page:0,recXPag:100,loadedRecsNumber:0,whereSql:"",selectSql:"",columns:{names:[],widths:[],types:[]}},queryEditor:{params:{}},orderby:{}}},watch:{filter:function(t,e){var a=this;t=JSON.cc(t);var n=t.map((function(t){var e=t.column_name,n=t.label,i=a.utils.getBasicDataType(t.data_type),r=Object.assign({},t,{alias:n,reference:e,operator:"AND",leftText:"",rightText:"",_active:!1,_inlist:!0,data_type:i,_extended:a.showAdvanced,_extendKey:a.showAdvanced,_orderby:"-"});return a.api.setFieldListSettings(r),r}));n[0].text="",n[0].value="";var i=this.$store.getters.qeParams(this.ventana.index);i||(i=[]);var r=n.concat(i);this.utils.unifyObjectKey({array:r,key:"alias"}),this.$store.commit("Ventana_injectQE",{indexVentana:this.ventana.index,qeParams:r})},qeParams:function(){var t=this;this.$nextTick((function(){t.compute()}))}},computed:{buttonsUser:function(){var t=[];return this.buttons.forEach((function(e,a){0!=a&&2!=a||t.push(e)})),t},distinct:{get:function(){var t=this.$store.state.ventanas.data[this.ventana.index].queryeditor.distinct;return t},set:function(t){this.$store.commit("set_distinct",{indexVentana:this.ventana.index,value:t})}},qeParams:{get:function(){var t=this.$store.state.qeParams[this.ventana.index];return t},set:function(t){this.$store.commit("Ventana_injectQE",{indexVentana:this.ventana.index,qeParams:t})}},series_parameters:function(){if(!this.qeParams)return[];var t=this.tablesRelation.joinSyntax.split(" INNER JOIN ")[0],e=JSON.cc(this.qeParams.filter((function(e){var a=e.reference?e.reference:e.key;return-1!=a.toLowerCase().indexOf(t.toLowerCase())})));return e},columns:function(){if(!this.$refs.qe)return[];var t=this.ventana.data.table,e=window.tablesMap.get(t),a=(this.ventana.data.fields,this.ventana.data.identities),n=(a[0],this.distinct),i=n?["1 as PK_ID"]:["[".concat(e.table_alias,"].[").concat(e.table_pkname,"] as PK_ID")],r=this.$refs.qe.settings.columns;return r.forEach((function(t){i.push(t)})),i},pkName:function(){var t=this.ventana.data.table,e=window.tablesMap.get(t);return e.table_pkname},tablesRelation:function(){return this.api.getTablesRelation(this.ventana.data.table)}},beforeUpdate:function(){},updated:function(){},mounted:function(){$(this.$refs.computer).sortable({handle:".cell-title",start:this.clearSimpleTable,stop:this.sortableStop,placeholder:"ui-state-highlight",revert:200,scroll:!0}),window.compute=this.compute,this.compute()},methods:{changeOperator:function(t){this.$refs.qe.changeOperator(t)},changeText:function(t,e,a){this.$refs.qe.changeText(t,e,a)},textKeyPress:function(t,e,a){this.$refs.qe.textKeyPress(t,e,a)},extendParam:function(t){this.$refs.qe.parameters.data[t]._extended=!this.$refs.qe.parameters.data[t]._extended,this.$refs.qe.emitParameters()},extendParams:function(){var t=!this.$refs.qe.parameters.data[0]._extended;this.$refs.qe.parameters.data.forEach((function(e){return e._extended=t})),this.$refs.qe.emitParameters(),this.showAdvanced=t},showFormulario:function(){window.showForm()},editAlias:function(t,e){$(t.target).focus()},saveAlias:function(t,e){this.$refs.qe.parameters.data[e].alias=t.target.innerHTML,this.$refs.qe.emitParameters()},clearSimpleTable:function(){this.grid.rows=[],this.resizeHeaders(!1,!0)},negateParam:function(t){this.$refs.qe.negateParam(t)},deleteParam:function(t){this.$refs.qe.deleteParam(t)},paramDelete:function(t){var e=this.grid.rows;if(!e)return!1;var a=[];e.forEach((function(e){var n={};Object.keys(e).forEach((function(a,i){i!=t+1&&(n[a]=e[a])})),a.push(n)})),this.grid.rows=a,a.length&&Object.keys(a[0]).length<2&&this.clearSimpleTable()},activateParam:function(t){var e=this;this.$refs.qe.activateParam(this.$refs.qe.parameters.data[t]),this.$nextTick((function(){e.$refs.qe.parameters.data[t]._active&&$(".search-field").eq(t).focus()}))},setNewOrder:function(t){this.$refs.qe.setNewOrder(t)},shortAlias:function(t){var e=t.split(".");return e[e.length-1]},clickFunc:function(t,e,a){console.log("target"),e.stopPropagation();var n="path"==e.target.tagName?e.target.closest("svg"):e.target,i=$(n).closest("div.header-cell");if("number"!=i.attr("type"))return!1;switch(t){case"SUM":t="AVG";break;case"AVG":t="DISTINCT";break;case"DISTINCT":t="SUM";break}"SUM"==t&&i.find(".button-operation svg").addClass("hidden").eq(0).removeClass("hidden"),"AVG"==t&&i.find(".button-operation svg").addClass("hidden").eq(1).removeClass("hidden"),"DISTINCT"==t&&i.find(".button-operation svg").addClass("hidden").eq(2).removeClass("hidden"),this.$refs.qe.parameters.data[a].aggregate_function=t,this.$refs.qe.emitParameters()},open_serie:function(t){this.$refs.popup.show()},operate_serie:function(t){var e=this;if(console.log(this.series.operation),console.log(JSON.cc(t)),!this.checkedIds||!this.checkedIds.length)return window.log("Operación cancelada. No hay ningún registro seleccionado.","darkorange"),!1;var a=this.tablesRelation.joinSyntax.split(" INNER JOIN ")[0],n=t.filter((function(t){return t.series&&""!=t.series.replaceValue})).map((function(t){var a=t.reference?t.reference:t.key,n=t.series.replaceValue;return"sobreescribir"==e.series.operation.toLowerCase()?a+" = '"+n+"'":a+" = NULL"})),i="UPDATE "+a+" SET "+n,r=this.ventana.data.identities,s=r[0];if(!n.length)return window.log("Operación cancelada. No ha rellenado ningún campo.","darkorange"),!1;var o=this.checkedIds.map((function(t){return"".concat(i," WHERE ").concat(s," = ").concat(t)})),c="";o.forEach((function(t){return c+=t+" "})),console.log(c),this.api.$dbq({sqlSyntax:c,dbID:this.api.getTableConnectionId(this.ventana.data.table)},(function(t){window.log(o.length+" registros alterados.","green")}),!0,!0)},scrollHeaders:function(t){$(this.$refs.computer).css({"margin-left":-1*t})},resizeHeaders:function(t,e){var a=$(this.$refs.computer).find("div.header-cell");this.grid.columns.widths=t,a.each((function(a){e?$(this).css({"max-width":"","min-width":"",width:""}):$(this).css({"max-width":t[a+1]+12+"px","min-width":t[a+1]+12+"px",width:t[a+1]+12+"px"})}))},qeParamUpdate:function(t){if("resorted"==t)return!1;this.$store.commit("Ventana_injectQE",{indexVentana:this.ventana.index,qeParams:t})},tabulator:function(t){if(!t.length)return"";t.forEach((function(t){return delete t[Object.keys(t)[0]]}));var e=$("<table/>"),a={border:"1px solid #eee",padding:"5px"},n=t[0],i=$("<tr/>");return e.append(i),Object.keys(n).forEach((function(t){var e=$("<td/>").css(a);i.append(e.text(t))})),t.forEach((function(t){var n=$("<tr/>");e.append(n),Object.keys(t).forEach((function(e){var i=$("<td/>").css(a);n.append(i.text(t[e]))}))})),e.wrap("<div/>").parent().html()},downloadListAsFile:function(){var t=this;this.loadPage(2,(function(){var e=new Blob(["\ufeff",t.tabulator(JSON.cc(t.grid.rows))],{type:"text/plain"}),a=window.URL.createObjectURL(e),n=document.createElement("a");document.body.appendChild(n),n.style="display: none",n.href=a,n.download="Listado.xls",n.click()}))},editRecord:function(){this.selected_row},containerResize:function(){this.$refs.Tabla.resizeHeaders()},headerClick:function(t,e){var a=this.qeParams[t],n=this.$refs.qe,i=this;e.stopPropagation(),i.$store.commit("set_contextDialogProps",a),window.contextDialog({qeParam:a,value:n.parameters.data[t].key,cb:function(e){e?(n.parameters.data[t].key=e,n.emitParameters()):i.$store.commit("set_contextDialogProps",a)}},[{componentName:"contextFieldEditList",componentLabel:"Configuración de lista"},{componentName:"contextFieldEditKey",componentLabel:"Configuración SQL"}])},checkClick:function(t){},custom_button_click:function(t){"getDocument"==t&&customjs.buttons.onclick.getDocument(this.api,this.selected_pk_id),"editRecord"==t&&customjs.buttons.onclick.editRecord(this.api,this.selected_pk_id)},rowClick:function(t){this.selected_pk_id=t.PK_ID,this.selected_row=t},paramsToForm:function(){},orderBy:function(t){this.orderby=JSON.cc(t),console.log(JSON.cc(t))},qeHasChanged:function(){var t=this.$refs.qe.settings!=this.grid.qeSettings||this.qeHasChanged.changed;return this.qeHasChanged.changed=!1,t},telon:function(t){var e=$(this.$refs.toolbar).find("button"),a=e.eq(1).add(e.eq(2)).add(e.eq(6));t?(a.prop("disabled",!0).css({"text-decoration":"line-through"}),window.working(1)):(a.prop("disabled",!1).css({"text-decoration":"none"}),window.working(0))},compute:function(t){var e=this,a=this.columns.map((function(t){var a,n=t.toLowerCase().split(" as "),i=(n[0],n.length>1?n[1]:n[0]),r=JSON.cc(e.qeParams);return Object.keys(r).forEach((function(t){var e=r[t].alias;"["+e.toLowerCase()+"]"==i.toLowerCase()&&(a=r[t].field_full_name)})),{sql:a,label:i}}));a.splice(0,1),a.forEach((function(t,a){e.grid.columns.types[a]="text",Object.keys(e.keysSettings).forEach((function(n){t.sql.toLowerCase()==n.toLowerCase()&&(e.grid.columns.types[a]=e.utils.getBasicDataType(e.keysSettings[n].data_type))}))}));var n=[];if(a.forEach((function(t,a){var i=e.qeParams[a].basic_data_type,r=e.qeParams[a].aggregate_function;-1==t.sql.toLowerCase().indexOf("select")?"number"==i?r?"DISTINCT"!=r?n.push(r+"("+t.sql+") as "+t.label):n.push("COUNT(DISTINCT("+t.sql+")) as "+t.label):n.push("'' as "+t.label):"DISTINCT"==r&&n.push("COUNT(DISTINCT("+t.sql+")) as "+t.label):n.push("'' as "+t.label)})),this.grid.columns.names=a,!n.length||!t)return!1;var i=JSON.cc(t);i.columns=n,console.log(i),this.api.$dbq(i,(function(t){var a=JSON.cc(t[0]);Object.keys(a).forEach((function(t){var n=a[t];n=n&&""!=n?n:"[No disponbible]",$(e.$refs["computed_["+t+"]"]).find("span").html(n).attr("title",n),$(e.$refs["computed_["+t+"]"]).find(".button-operation *").attr("title",n)}))}))},set_distinct:function(){this.$store.commit("set_distinct",{indexVentana:this.ventana.index,value:!this.distinct}),this.qeHasChanged.changed=!0},keyDownSearchField:function(t,e){if(13===t.keyCode)return t.preventDefault(),!1},positionContext:function(t,e){var a=$(t.target),n=a.text(),i=this.descriptedSelect(n);if(i.descripcion)return!1;this.$refs.qe.positionContext(e,t,this.getParam(e))},alterSearchString:function(t,e){var a=$(t.target).text(),n=JSON.cc(this.$refs.qe.parameters.data);n[e].text=a,n[e].value=a,this.$refs.qe.parameters.data=n,this.$refs.qe.emitParameters()},focusSearchField:function(t,e,a){var n=$(t.target),i=n.text(),r=this.descriptedSelect(i),s=i;r.descripcion&&(s=r.descripcion),a?(window.contextList.closeContext(),this.alterSearchString(t,e),n.text(s)):(n.addClass("focused"),this.$refs.qe.openContext(e,t,this.$refs.qe.parameters.data[e],(function(){n.removeClass("focused")})),n.text(this.$refs.qe.parameters.data[e].text))},descriptedSelect:function(t){try{var e=JSON.parse(t);e.sql,e.descripcion;return e}catch(Qa){return t}},getParamSearchString:function(t){var e=this.$refs.qe.parameters.data[t].text;"[]"==e&&(e="");var a=this.descriptedSelect(e);return a.descripcion&&(e=a.descripcion),e},getParam:function(t){var e=this.$refs.qe.parameters.data[t];return e},sortableStop:function(t,e){var a=$(this.$refs.computer).find(".header-cell"),n=[];a.each((function(){n.push(JSON.parse($(this).attr("param")))})),$(this.$refs.computer).sortable("cancel"),this.$refs.qe.parameters.data=n,this.$refs.qe.emitParameters(),this.$refs.qe.$emit("paramUpdate","resorted")},loadList:function(t,e){var a=this,n=this.ventana.data.table,i=this.tablesRelation.joinSyntax,r=this.$refs.qe.settings.sqlSyntax,s=r.length?"WHERE "+r:"",o=this.pkName,c="pkname = '".concat(n,".").concat(o,"'"),l=("sql=delete DBH_listado INSERT INTO DBH_listado (sessionId,idusuario,idlistado,pkname) \n            select 1,1,".concat(o,",'").concat(n,".").concat(o,"' FROM ").concat(i," ").concat(s," \n            SELECT count(idlistado) as noFilas FROM DBH_listado WHERE ").concat(c),"sql=select ".concat(o," as id FROM ").concat(i," ").concat(s),this.api.getTableConnectionId(n),"SELECT ".concat(this.distinct?"DISTINCT ":""," ").concat(this.columns," FROM ").concat(i,"  ").concat(r?"WHERE "+r:""));this.grid.loadedRecsNumber=0,console.log(l),this.api.$dbq({sqlSyntax:"set language spanish SELECT COUNT(*) as recnum FROM ("+l+") as a",dbID:this.api.getTableConnectionId(n)},(function(n){if(n[0].Error)return console.log("Error"),console.log(n),window.circus.showHelpBox({title:"Error SQL",text:n[0].Error}),void a.telon(0);a.grid.rowCount=n[0].recnum?n[0].recnum:0,a.grid.whereSql=s,a.grid.qeSettings=a.$refs.qe.settings,a.grid.page=0,a.grid.rows=[],a.checkedIds=[],a.checkedIndexes=[],a.loadPage(t,e)}),!1,!0)},loadPage:function(t,e){var a=this;this.telon(1),window.circus.panels.form=!1,window.circus.panels.bottom=!1;var n=this.ventana.data.table,i=this.columns,r=this.tablesRelation.joinSyntax,s=this.$refs.qe.settings.sqlSyntax,o=s.length?s:"";if(this.compute({schemaSyntax:r,whereSyntax:o,dbID:this.api.getTableConnectionId(n)}),this.qeHasChanged())this.loadList(t,e);else{if(!this.grid.rowCount)return this.telon(0),window.circus.showHelpBox({title:"No hay resultados",text:"La consulta no ha devuelto ningún resultado."}),!1;if(this.grid.rowCount==this.grid.loadedRecsNumber)return 2==t?(e&&e(),void this.telon(0)):(confirm("Se han cargado la totalidad de los registros de este listado.\n\nDesea comenzar la carga del listado nuevamente desde el principio?")?this.loadList(t):(e&&e(),this.telon(0)),!1);var c=this.pkName,l=window.tablesMap.get(n),d=("pkname = '".concat(n,".").concat(c,"'"),""!=this.$refs.qe.settings.orderBy?this.$refs.qe.settings.orderBy:"[".concat(l.table_alias,"].[").concat(c,"]")),u=this.grid.recXPag,h=this.grid.page*u,f="sql=SELECT ".concat(this.distinct?"DISTINCT ":""," ").concat(i," FROM ").concat(r," ").concat(this.grid.whereSql," ORDER BY ").concat(d," OFFSET ").concat(h," ROWS FETCH NEXT ").concat(u," ROWS ONLY");this.grid.page++;var p=this.grid.page*this.grid.recXPag;(p>this.grid.rowCount||t)&&(p=this.grid.rowCount),this.grid.selectSql=f.substring(4),console.log(this.grid.selectSql);var m={columns:i,schemaSyntax:r,whereSyntax:o,orderbyColumns:d,offset:h,pageSize:u,dbID:this.api.getTableConnectionId(n),distinct:this.distinct};t&&(m.pageSize=999999999),this.api.$dbq(m,(function(t){a.grid.rows=a.grid.rows.concat(t),a.grid.loadedRecsNumber=p,a.telon(0),window.circus.showHelpBox({title:"Cargados ".concat(p," registros"),text:"Se han cargado los siguientes ".concat(p," registros")}),e&&e()}))}}}},Ye=Xe,ta=(a("65ef"),Object(_t["a"])(Ye,he,fe,!1,null,"1b2fbb90",null)),ea=ta.exports,aa={props:["ventana","isInline","index","switchVentana","panels","visible"],components:{Ly:Jt,Formulario:ue,Toolbar:Qt,Listado:ea},data:function(){var t=this;return{configFilesList:[],parentTables:this.api.getDirectParents(this.ventana.data.table),childTables:this.api.getDirectSuns(this.ventana.data.table),tree:!0,formver:!0,list:!0,show:!0,overflow:!this.isInline,itemEditor:{branchs:[{key:"form"},{key:"list"}]},formFilterState:{data:[],settings:this.keysSettings},form:{data:{}},admin:this.api.parsedSearch.admin,buttons2:[{label:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><path fill="#444444" d="M0 16h16v-16h-16v16zM3 1v1h1v-1h11v14h-12v-1h-1v1h-1v-1h1v-1h-1v-1h1v-1h-1v-1h1v-1h-1v-1h1v-1h-1v-1h1v-1h-1v-1h1v-1h-1v-1h1v-1h1z"></path><path fill="#444444" d="M2 12h1v1h-1v-1z"></path><path fill="#444444" d="M3 13h1v1h-1v-1z"></path><path fill="#444444" d="M3 11h1v1h-1v-1z"></path><path fill="#444444" d="M3 9h1v1h-1v-1z"></path><path fill="#444444" d="M2 10h1v1h-1v-1z"></path><path fill="#444444" d="M2 8h1v1h-1v-1z"></path><path fill="#444444" d="M2 6h1v1h-1v-1z"></path><path fill="#444444" d="M3 7h1v1h-1v-1z"></path><path fill="#444444" d="M3 5h1v1h-1v-1z"></path><path fill="#444444" d="M3 3h1v1h-1v-1z"></path><path fill="#444444" d="M2 4h1v1h-1v-1z"></path><path fill="#444444" d="M2 2h1v1h-1v-1z"></path></svg>',helpCode:"",onClick:function(){t.$emit("panelSwitch","form")}},{label:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><path fill="#444444" d="M16 16v-16h-16v16h16zM1 13h1v-1h-1v-11h14v12h-1v1h1v1h-1v-1h-1v1h-1v-1h-1v1h-1v-1h-1v1h-1v-1h-1v1h-1v-1h-1v1h-1v-1h-1v1h-1v-1h-1v-1z"></path><path fill="#444444" d="M12 13h1v1h-1v-1z"></path><path fill="#444444" d="M13 12h1v1h-1v-1z"></path><path fill="#444444" d="M11 12h1v1h-1v-1z"></path><path fill="#444444" d="M9 12h1v1h-1v-1z"></path><path fill="#444444" d="M10 13h1v1h-1v-1z"></path><path fill="#444444" d="M8 13h1v1h-1v-1z"></path><path fill="#444444" d="M6 13h1v1h-1v-1z"></path><path fill="#444444" d="M7 12h1v1h-1v-1z"></path><path fill="#444444" d="M5 12h1v1h-1v-1z"></path><path fill="#444444" d="M3 12h1v1h-1v-1z"></path><path fill="#444444" d="M4 13h1v1h-1v-1z"></path><path fill="#444444" d="M2 13h1v1h-1v-1z"></path></svg>',helpCode:"",onClick:function(){t.$emit("panelSwitch","bottom")}}],buttons:[{label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" style="transform:rotate(180deg)"><path d="M180.52,149v33.92H76.75V149H56.81v43.9a10,10,0,0,0,10,10H190.47a10,10,0,0,0,10-10V149H180.52Zm-48.3-3.08c3.39-3.38,27.68-35.63,27.68-35.63s4.3-4.29-1.41-4.29H143.63V56.41s0.06-2.06-2.6-2.06H118.39c-3.69,0-3,2.45-3,2.45V107H99.25c-4.71,0-.37,4.1-0.37,4.1l28.55,34.5S129.78,148.37,132.22,145.92ZM128,256h0A128,128,0,0,1,0,128H0A128,128,0,0,1,128,0h0A128,128,0,0,1,256,128h0A128,128,0,0,1,128,256Z"></path></svg>',helpCode:"config-load",onClick:function(){var e=$("#configFileSelect option:selected").text();t.loadConfigFile(e),console.log(e)}},{label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M180.52,149v33.92H76.75V149H56.81v43.9a10,10,0,0,0,10,10H190.47a10,10,0,0,0,10-10V149H180.52Zm-48.3-3.08c3.39-3.38,27.68-35.63,27.68-35.63s4.3-4.29-1.41-4.29H143.63V56.41s0.06-2.06-2.6-2.06H118.39c-3.69,0-3,2.45-3,2.45V107H99.25c-4.71,0-.37,4.1-0.37,4.1l28.55,34.5S129.78,148.37,132.22,145.92ZM128,256h0A128,128,0,0,1,0,128H0A128,128,0,0,1,128,0h0A128,128,0,0,1,256,128h0A128,128,0,0,1,128,256Z"></path></svg>',helpCode:"config-save",onClick:function(){var e=t.api.saveTree(t.$refs.configFileSelect.value,1);if(!e)return!1;t.configFilesList.filter((function(t){return t.toLowerCase()==e.toLowerCase()})).length||t.configFilesList.push(e),alert("Se ha guardado la configuración actual en el archivo "+e)}},{label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 330.5 330.5"><path d="M178.3 136.6l16.4 16.4 69.7-69.7c2.3-2.3 3.4-5.2 3.4-8.2 0-3-1.1-5.9-3.4-8.2 -4.5-4.5-11.8-4.5-16.4 0L178.3 136.6zM172.3 140.2l-0.7-0.7 -12.4 12.4 -7.7 7.7 20.4 20.4 8.3-8.3 11.8-11.8 -0.9-0.9 -1.2-1.2 -16.4-16.4L172.3 140.2zM66.8 197.2c-0.1 0-0.2 0.1-0.3 0.1 -0.5 0.1-0.9 0.3-1.3 0.6l-0.2 0.1L65 198c-0.5 0.3-0.8 0.7-1.2 1.2 -0.3 0.5-0.6 1-0.8 1.6 -0.5 1.7-0.3 3.7 1.3 4.9 3.8 3 7.7 6 11.6 8.9l0.7-0.3 1.7-0.7L80 213l14.1-5.4 20.6-7.9 -14.3 16.6 -8 9.2 -1.1 1.3 -1.1 1.3 -1.1 1.3c0.8 0.3 1.6 0.4 2.5 0.2 0.5-0.1 1-0.3 1.6-0.5 0.1 0 0.1-0.1 0.2-0.1 0.6-0.3 1.1-0.5 1.7-0.7l3.3 3.3c0 0.8-0.1 1.5-0.1 2.3 -0.1 0.7-0.1 1.5-0.2 2.2 -0.1 1.1-0.3 2.2-0.6 3.3 -0.6 2.5 0.8 5.7 3.5 6.2 4.4 0.9 8 2.4 11.1 4.5 3.5 2.4 6.4 5.4 9.1 9.1 1.3 1.8 2.6 3.6 3.9 5.6 1 1.6 2.6 2.3 4.1 2.3 0.7 0 1.4-0.1 2-0.4 2.4-0.9 4.2-3.4 3.1-6.2l32.3-75.5 -20.2-20.2L66.8 197.2zM165.2 330.5L165.2 330.5C74 330.5 0 256.5 0 165.2v0C0 74 74 0 165.2 0h0c91.3 0 165.2 74 165.2 165.2v0C330.5 256.5 256.5 330.5 165.2 330.5z"/></svg>',helpCode:"config-delete",onClick:function(){var e=$("#configFileSelect option:selected").text();t.deleteConfigFile(e),t.configFilesList=t.configFilesList.filter((function(t){return t!=e}))}}]}},computed:{evaluatedFieldsOfVentana:function(){var t=this.$store.state.tablesMap[this.ventana.data.table].evaluatedFields;return{fields:t}},database:function(){return JSON.cc(this.$store.state.database)},evaluatedVentana:function(){var t=this.ventana;return Object.assign(t.data,this.evaluatedFieldsOfVentana),t},childTablesWindows:function(){var t=Object.keys(this.api.getDirectSuns(this.ventana.data.table)),e=this.$store.state.ventanas.data.map((function(t,e){return{name:t.name,table:t.table,index:e}})),a=e.filter((function(e){return-1!=t.indexOf(e.table.toLowerCase())}));return a},parentTablesWindows:function(){var t=Object.keys(this.api.getDirectParents(this.ventana.data.table)),e=this.$store.state.ventanas.data.map((function(t,e){return{name:t.name,table:t.table,index:e}})),a=e.filter((function(e){return-1!=t.indexOf(e.table.toLowerCase())}));return a},availableTables:function(){return Array.from(window.tablesMap)},tabs:function(){var t=this.ventana.data.table,e=this.api.getTablesRelation(t);return e},keysSettings:function(){var t,e=this,a={};return this.evaluatedFieldsOfVentana.fields?(this.evaluatedFieldsOfVentana.fields.forEach((function(n){var i=!!n.dbsettings&&n.dbsettings.list;t={data_type:n.data_type},i?(Object.assign(t,{list:{values:i}}),a[e.fieldUniqueId(n)]=t):a[e.fieldUniqueId(n)]=t})),a):a},toolbarButtons:function(){return[{label:this.formver?" < ":" > ",onClick:this.toolbarClick}]}},watch:{ventana:function(){},database:function(){var t=this;this.$refs.listado.qeParams.forEach((function(e){t.api.setFieldListSettings(e)})),this.$refs.listado.qeParams=JSON.cc(this.$refs.listado.qeParams)},evaluatedFieldsOfVentana:function(){this.form.data=this.formDataBlanked()}},methods:Object(d["a"])({},Object(f["b"])(["setVentana"]),{logout:function(){window.logout()},loadConfigFile:function(t){this.api.loadConfig(t)},deleteConfigFile:function(t){var e=this;if(!confirm("Eliminar "+t+"?"))return!1;this.api.deleteConfig(t,(function(t){alert(t),e.loadFilesList($("#configFileSelect")[0])}))},getRelations:function(t,e){var a=[];t.forEach((function(t,n){var i='<li style="text-transform:">'+t+" ("+e[n]+")</li>";a.push(i)}));var n=$("<div/>").append("<titulo>Relaciones</titulo>").append('<ul style="list-style-type: square;padding-left:10px">'+a.toString().replace(/\,/g,"")+"</ul>");return n.html()},injectChild:function(){var t=this.$refs.listado.$refs.qe,e=t.settings.params,a=this.$refs.childTable.value;this.$refs.childTable.selectedIndex=0;var n=this.$store.getters.qeParams(a);n||(n=[]),this.$store.commit("Ventana_injectQE",{indexVentana:a,qeParams:n.concat(e)}),this.switchVentana(a)},injectParent:function(){var t=this.$refs.listado.$refs.qe,e=t.settings.params,a=this.$refs.parentTable.value,n=this.tabs.joinSyntax,i=this.parentTablesWindows.filter((function(t){return t.index==a}))[0].table,r=this.ventana.data.table.toUpperCase()+" con "+e.filter((function(t){return t._active})).map((function(t){var e=t.value;try{var a=JSON.parse(e);"object"!=Object(o["a"])(a)||a.length||(e=a.descripcion)}catch(Qa){}return"".concat(t.alias,": ").concat(e)})),s=this;this.api.getIdentitiesForTableSet(i,(function(e){var o=i+"."+e[0].column_name;console.log(o);var c="SELECT ".concat(o," FROM ").concat(n," ").concat(t.settings.sqlSyntax?" WHERE "+t.settings.sqlSyntax:""),l=JSON.stringify({sql:c,descripcion:r}),d={alias:o,campo:"",data_type:"text",key:o,reference:o,leftText:"",rightText:"",text:l,value:l,vista:"",operator:"AND",_active:!0,_extended:!1,_inlist:!0,_orderby:""};s.$refs.parentTable.selectedIndex=0;var u=s.$store.getters.qeParams(a);u||(u=[]);var h=[d].concat(u);s.utils.unifyObjectKey({array:h,key:"alias"}),s.$store.commit("Ventana_injectQE",{indexVentana:a,qeParams:h}),s.switchVentana(a)}))},rowClick:function(t){this.form.data=this.formDataBlanked(),Object.assign(this.form.data,t)},nameChange:function(t){var e=t.target.innerHTML;console.log(e),this.$store.commit("Ventana_setName",{indexVentana:this.index,ventanaName:e})},tableChange:function(t){var e=t.target.value;this.setFieldsForTable(e),this.$refs.listado.custom_buttons=this.api.$buttonsForTable(e)},setFieldsForTable:function(t){t&&this.$store.commit("Ventana_setTable",{indexVentana:this.index,tableName:t})},toolbarClick:function(t){var e="formver"!=t?t.toLowerCase():"formver";this[e]=!this[e],setTimeout(function(){this.$refs.listado.containerResize()}.bind(this),10)},fieldsOfVentana:function(t){return this.evaluatedFieldsOfVentana.fields},tabName:function(t){var e=t.table_name;return e},formFilter:function(t){var e=JSON.cc(this.evaluatedFieldsOfVentana.fields[t]);this.formFilterState.data=[e];var a=this.$refs.listado.grid.rows;if(!a)return!1;this.$refs.listado.clearSimpleTable()},fieldUniqueId:function(t){var e=t.table_name,a=t.column_name;if(t.literal)return a;var n=t.table_catalog;return n+".dbo."+e+"."+a},formSetValues:function(t){var e=this.formDataBlanked();Object.keys(t).forEach((function(a){"undefined"!=typeof e[a]&&(e[a]=t[a])})),this.form.data=e},formDataBlanked:function(){var t=this,e={};return this.evaluatedFieldsOfVentana.fields?(this.evaluatedFieldsOfVentana.fields.forEach((function(a){e[t.fieldUniqueId(a)]=""})),e):e}}),created:function(){var t=this;this.api.listFiles("./json/",(function(e){t.configFilesList=e})),$(this.$refs.Formulario).resizable({handles:"e"});var e=this;$(window.document).on("keyup",(function(t){13==t.keyCode&&e.$refs.listado.loadPage()}))},updated:function(){$(this.$refs.Formulario).resizable({handles:"e"})}},na=aa,ia=(a("ac37"),Object(_t["a"])(na,Xt,Yt,!1,null,"1be294bc",null)),ra=ia.exports,sa=(Mt={data:function(){return{}},components:{Ly:Jt,Ventana:ra,Toolbar:Qt},props:["containers","panels"]},Object(Dt["a"])(Mt,"data",(function(){return{selectedIndex:0}})),Object(Dt["a"])(Mt,"computed",{ventanas:function(){return this.$store.state.ventanas.data},containerWidth:function(){var t=this.containers.length;return{width:"calc(100% / ".concat(t,")")}}}),Object(Dt["a"])(Mt,"methods",{visibleVentanas:function(t){var e=this.$store.state.ventanas.data.map((function(t,e){return{index:e,visible:t.visible}})).filter((function(t){return t.visible})).map((function(t){return t.index}));return e},ventanasDelContainer:function(t){var e=this.ventanas.map((function(t,e){return{data:t,index:e}}));if(!t)return e;var a=t.index,n=e.filter((function(t){return-1!=t.data.container.indexOf(a)}));return n},styleVentana:function(t,e){var a=this;if("visible"!=this.containerType(t))return!1;var n=this.ventanasDelContainer(t).filter((function(e){return-1!=a.visibleVentanas(t).indexOf(e.index)})).length,i={height:"calc(100% / ".concat(n,")"),top:"0px",left:0,width:"100%",position:"absolute",border:"0px solid green"};return i},onButtonClick:function(t){this.selectedIndex=t;var e=$(".window-container"),a=$(".pestanaVentana");e.css({"z-index":-1}),e.eq(t).css({"z-index":1}),a.removeClass("pestanaVentanaSelected").eq(t).addClass("pestanaVentanaSelected")},switchContainerType:function(t){var e=this.containerType(t),a="visible"==e?"scroll":"visible";this.$store.commit("setContainerType",{index:t.index,type:a})},containerName:function(t){return t.data.name},containerType:function(t){return t.data.type},isInlineContainer:function(t){return"scroll"==this.containerType(t)?1:0},toolbarButtons:function(t){var e=this,a=this.ventanasDelContainer(t),n=a.map((function(n){return{label:n.data.name,onClick:function(){return e.onButtonClick(n.index,t)},onClose:function(){if(1!=a.length&&confirm("Eliminar pestaña?")){var t,e=this.selectedIndex;t=0==e?0:e==this.ventanas.length-1?this.ventanas.length-2:e-1,this.$store.commit("Ventana_delete",{index:n.index}),this.onButtonClick(t)}}.bind(e)}}));return n.push({label:"+",onClick:function(){var t=a[a.length-1];this.$store.commit("Ventana_clone",{index:t.index}),this.onButtonClick(this.ventanas.length-1)}.bind(this),onClose:function(){}}),n},saveWindowName:function(t,e){this.$store.commit("Ventana_setName",{indexVentana:e,ventanaName:$(t).text()}),$(t).attr("contenteditable",!1)},editWindowName:function(t){$(t).attr("contenteditable",!0).focus()},panelSwitch:function(t){this.$emit("panelSwitch",t)}}),Object(Dt["a"])(Mt,"mounted",(function(){this.onButtonClick(0)})),Mt),oa=sa,ca=(a("5462"),Object(_t["a"])(oa,Gt,Zt,!1,null,null,null)),la=ca.exports,da=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Ly",{attrs:{flexbox:"1",column:"1","data-component":"context-menu"}},[a("Ly",[t._v(t._s(t.title)),a("button",{on:{click:function(e){return t.close()}}},[t._v("Close")])]),a("Ly",[a("Toolbar",{attrs:{buttons:t.buttons}})],1),a("Ly",[a("ItemEditor",{attrs:{item:t.item,lists:t.lists,branchs:t.branchs,keysSettings:t.keysSettings},on:{change:t.formChange}})],1)],1)},ua=[],ha={components:{ItemEditor:qe,Ly:Jt,Toolbar:Qt},data:function(){return{buttons:[{label:"Save",onClick:this.commitForm}]}},computed:{item:function(){var t=this.$store.state.contextMenu.item;return t||{}},cursor:function(){return this.$store.state.contextMenu.cursor},title:function(){return this.$store.state.contextMenu.title},branchs:function(){return this.$store.state.contextMenu.branchs},lists:function(){return this.$store.state.contextMenu.lists},keysSettings:function(){return this.$store.state.contextMenu.keysSettings}},methods:{formChange:function(t){Object.keys(t).forEach((function(e){return t[e]=t[e].value})),this.$store.dispatch("context-menu",{action:"formChange",item:t})},commitForm:function(t){this.$store.dispatch("context-menu",{action:"save"})},close:function(){this.$store.dispatch("context-menu",{action:"clear"})}},createdd:function(){JSON.parse(JSON.stringify(this.$store.state.contextMenu.campos));this.campos=this.$store.state.contextMenu.campos}},fa=ha,pa=(a("df46"),Object(_t["a"])(fa,da,ua,!1,null,null,null)),ma=(pa.exports,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%",height:"100%"}},t._l(t.treedata,(function(e){return a("div",{staticClass:"main-node"},[a("div",{staticClass:"label"},[t._v(t._s(e.label))]),Array.isArray(e.content)?t._t("default",t._l(e.content,(function(e){return a("div",{staticClass:"node1"},[t._v(" "+t._s(e)+" ")])}))):t._t("default")],2)})),0)}),ga=[],va={components:{},props:{treedata:{type:Array,required:!0}},data:function(){return{}},mounted:function(){console.log(this.treedata)}},ba=va,xa=Object(_t["a"])(ba,ma,ga,!1,null,null,null),wa=xa.exports,ya=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"context-dialog-container"},[a("div",{},t._l(t.components,(function(e,n){return a("button",{on:{click:function(e){return t.showComponent(n)}}},[t._v(t._s(e.componentLabel))])})),0),a("div",{staticStyle:{"min-height":"0"}},t._l(t.components,(function(e,n){return t.shownComponentIndex==n?a(e.componentName,{tag:"component",attrs:{componentProps:t.componentProps}}):t._e()})),1)])},_a=[],Sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"context-field-edit-list"},[a("div",{staticClass:"encabezado"},[t._m(0),a("b",[t._v(t._s(t.componentProps.qeParam.is_computed?t.componentProps.qeParam.label:t.componentProps.qeParam.field_full_name))])]),a("SimpleTable",{ref:"simpleTable",attrs:{rows:t.rows,hiddenKeys:["listModelName"],checkable:!0,searchable:!0,selectable:!0,showHeaders:!1,checkedRows:t.checkedRows,singlecheck:!0,editablekeys:["nombre"],searchString:""},on:{rowClick:t.rowClick,rowEdit:t.rowEdit,checkClick:t.checkClick}})],1)},ka=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"text-transform":"uppercase"}},[t._v("Cambiar modelo de lista desplegable"),a("br")])}],Ca={components:{SimpleTable:kt},props:{componentProps:{type:Object,required:!0}},data:function(){return{listsModels:this.$store.state.database.listsModels,lists:this.$store.state.database.lists}},computed:{rows:function(){var t=this.listsModels,e=Object.keys(t).map((function(e){return{nombre:t[e].alias?t[e].alias:e,listModelName:e}}));return e},checkedRows:function(){var t=this.listsModels,e=(this.lists,this.componentProps.qeParam),a=e.listModel,n=[];return Object.keys(t).forEach((function(t,e){t==a&&n.push(e)})),n}},methods:{rowClick:function(){},rowEdit:function(t){t.rowIndex;var e=t.__editedKeyName__,a=t.listModelName,n=t[e];this.$store.commit("set_listModelAlias",{listModelName:a,value:n})},checkClick:function(t){var e=this.componentProps.qeParam,a=e.field_full_name,n=e.table_config_keyname,i=e.column_name,r=!1;t.length&&(r=t[0].listModelName);JSON.cc(this.$store.state);window.commit("set_listModelNameToField",{listModelName:r,tableName:n,fieldName:i}),window.circus.showHelpBox({title:"Modelo de lista cambiado",text:"Se ha canbiado el modelo de lista asignado al campo ".concat(a," a ").concat(r)}),this.componentProps.cb&&this.componentProps.cb()}},mounted:function(){}},Oa=Ca,$a=(a("5ae5"),Object(_t["a"])(Oa,Sa,ka,!1,null,null,null)),Na=$a.exports,Ta=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"context-field-edit-key"},[a("div",{staticClass:"encabezado"},[t._m(0),a("b",[t._v(t._s(t.componentProps.reference))])]),a("textarea",{ref:"textarea",staticStyle:{resize:"none",overflow:"hidden"},domProps:{value:t.qeParam.key},on:{input:function(e){return t.oninput()}}})])},Pa=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"text-transform":"uppercase"}},[t._v("Cambiar sintaxis SQL"),a("br")])}],La={components:{},props:{componentProps:{type:Object,required:!0}},data:function(){return{listsModels:JSON.cc(this.$store.state.database.listsModels),lists:JSON.cc(this.$store.state.database.lists)}},computed:{qeParam:function(){return this.$store.state.contextDialog.props},rows:function(){var t=this.listsModels,e=Object.keys(t).map((function(t){return{nombre:t}}));return e},checkedRows:function(){var t=this.listsModels,e=this.lists,a=this.componentProps.reference,n=e[a],i=[];return Object.keys(t).forEach((function(t,e){t==n&&i.push(e)})),i}},mounted:function(){this.auto_grow(this.$refs.textarea)},methods:{editKey:function(t){this.componentProps.reference;var e=this.componentProps.qeParam;e.key=t.target},oninput:function(){var t=this.$refs.textarea,e=t.value;this.auto_grow(t),this.componentProps.cb&&this.componentProps.cb(e)},auto_grow:function(t){t.style.height="5px",t.style.height=t.scrollHeight+"px"}}},Ma=La,qa=(a("e174"),Object(_t["a"])(Ma,Ta,Pa,!1,null,null,null)),ja=qa.exports,Ea={components:{Toolbar:Qt,contextFieldEditList:Na,contextFieldEditKey:ja},props:{components:{type:Array,required:!1},componentProps:{type:Object,required:!1}},data:function(){return{shownComponentIndex:0}},computed:{item:function(){var t=this.$store.state.contextMenu.item;return t||{}}},methods:{showComponent:function(t){this.shownComponentIndex=t}}},Fa=Ea,Va=(a("2aea"),Object(_t["a"])(Fa,ya,_a,!1,null,null,null)),za=Va.exports,Ia=it,Ha=E;window.bus=new i["a"],JSON.cc=function(t){return"object"!=Object(o["a"])(t)?t:JSON.parse(JSON.stringify(t))};var Da={install:function(t,e){t.prototype.api=n,t.prototype.utils={getBasicDataType:function(t){var e="text",a="number",n="date";switch(t){case"number":return a;case"int":return a;case"float":return a;case"money":return a;case"datetime":return n;case"date":return n;default:return e}},getSpDate:function(t){var e={day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},a=new Intl.DateTimeFormat("es-ES",e);return a.format(t)},setTextareaHeight:function(t){if("TEXTAREA"==t.tagName){t.style.height=0;var e=1*t.scrollHeight,a=2.8,n=e+a;n=Math.round(n),n<18&&(n=18),t.style.height=n+"px"}},unifyObjectKey:function(t){var e=t.array,a=t.key,n=[];return _.reverse(e),e.forEach((function(t){while(-1!=n.indexOf(t[a]))t[a]+="_2";n.push(t[a])})),_.reverse(e),e}},t.prototype.uniqueid=h.a}};i["a"].use(Da);var Ra={store:w,components:{Ly:Jt,ToolBar:Qt,Containers:la,SimpleTable:kt,ContextList:Ft,treeMenu:wa,contextDialog:za},data:function(){var t=this;return{panels:{form:!0,parameters:!0,top:!0,bottom:!0},treedata_tables:[],sessionId:sessionStorage["logged"],helpText:"",showHelpState:!1,logText:[],admin:this.api.parsedSearch.admin,queries:[],contextListData:[],contextList:{contextListData:[],contextListHiddenKeys:[],top:400,left:100,height:300,checkedRows:[],type:"text",comparation:0,leftVal:"",rightVal:"",searchString:""},contextDialog:{show:!1,componentProps:{}},show:{queries:!0,list:!0,formlist:!0},buttons:[{label:"Save Tree",onClick:function(){return Ia()}}],lists:[{key:"areas",multiple:!0,values:function(){return t.$store.state.areas.map((function(t,e){return{value:e,text:t.name}}))}()},{key:"container",multiple:!0,values:function(){return t.$store.state.containers.map((function(t,e){return{value:e,text:t.name}}))}()},{key:"table",values:function(){return Object.keys(t.$store.state.database.tables).map((function(t){return{value:t,text:t}}))}()}],keysSettings:{areas:{list:{multiple:!0,values:function(){return t.$store.state.areas.map((function(t,e){return[e,t.name]}))}()}},container:{list:{multiple:!0,values:function(){return t.$store.state.containers.map((function(t,e){return[e,t.name]}))}()}},table:{list:{values:function(){return Ha()}()}}},gridActions:[{button:'<svg style="width:20px;opacity:inherit" data-help-code="general-sql-get" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56"><path d="M28 0C12.6 0 0 12.6 0 28s12.6 28 28 28 28-12.6 28-28S43.4 0 28 0zM40 41H16c-1.1 0-2-0.9-2-2s0.9-2 2-2h24c1.1 0 2 0.9 2 2S41.1 41 40 41zM40 30H16c-1.1 0-2-0.9-2-2s0.9-2 2-2h24c1.1 0 2 0.9 2 2S41.1 30 40 30zM40 19H16c-1.1 0-2-0.9-2-2s0.9-2 2-2h24c1.1 0 2 0.9 2 2S41.1 19 40 19z"/></svg>',func:function(t,e){t.stopPropagation();var a=this.$store.state.queries,n=a[a.length-e-1],i="SELECT ".concat(n.queryEditor.columns," FROM ").concat(n.joinSyntax," ").concat(n.queryEditor.sqlSyntax?" WHERE "+n.queryEditor.sqlSyntax:""," ").concat(n.queryEditor.orderBy?" ORDER BY "+n.queryEditor.orderBy:"");console.log(i),window.prompt("Presione CTRL+C para copiar en el portapapeles. Luego ENTER.",i)}.bind(this)},{button:'<svg style="width:20px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"><path d="M26 0C11.7 0 0 11.7 0 26s11.7 26 26 26 26-11.7 26-26S40.3 0 26 0zM38.5 28h-25c-1.1 0-2-0.9-2-2s0.9-2 2-2h25c1.1 0 2 0.9 2 2S39.6 28 38.5 28z"/></svg>',func:function(t,e){if(t.stopPropagation(),!confirm("Eliminar la vista?"))return!1;this.queriesRowDelete(e)}.bind(this)}]}},computed:{globalState:function(){return this.$store.state},queries_old:function(){var t=this;this.api.$dbq({schemaSyntax:"circus.dbo.views",columns:["v_id","v_nombre","v_identificador","v_json"],orderbyColumns:["v_id"],language:"spanish"},(function(t){console.log(t)}));var e=this.$store.state.queries,a=e.map((function(e){var a=e.queryEditor.params,n=new $t(a,t.$store.state.queries),i=n.getWhereText();return{Nombre:e.customName,Identificador:e.name,Fecha:e.fecha,Tabla:e.tableNames[0].toUpperCase(),Columnas:e.queryEditor.params.map((function(t){return t.alias.split(".")[1]})).toString().replace(/,/g,", "),Condiciones:i}}));return _.reverse(a)},areas:function(){var t=this.$store.state.areas.map((function(t,e){return{data:t,index:e}}));return t},visibleAreas:function(){var t=this.areas.filter((function(t){return t.data.visible}));return t},containers:function(){var t=this.$store.state.containers.map((function(t,e){return{data:t,index:e}}));return t},areaHeight:function(){var t=this.visibleAreas.length;return{height:"calc(100% / ".concat(t,")")}}},methods:{login:function(){var t=this.$refs.controlUsuario.value,e=this.$refs.controlContrasena.value;if("nauj"!=t||"juan"!=e)return alert("Usuario no válido."),!1;this.sessionId=!0,localStorage["usr"]="nauj",localStorage["pass"]="juan",sessionStorage["logged"]=!0},getLoginCookie:function(t){return localStorage[t]},autoShowForm:function(t){$(t.target).closest('[data-component="Formulario"]').length>0&&alert("b")},loadQueries:function(){var t=this;this.api.$dbq({schemaSyntax:"views",columns:["v_id","v_nombre","v_identificador","convert(char(10),v_fecha,103) as v_fecha","v_json"],orderbyColumns:["v_id"],language:"spanish",dbID:"circus"},(function(e){var a=e.map((function(t){var e=!1;try{e=JSON.parse(t.v_json),"object"!=Object(o["a"])(e)||null==e?e=!1:(e.customName=t.v_nombre,e.name=t.v_identificador,e.fecha=t.v_fecha,e.id=t.v_id)}catch(Qa){}return e})),n=a.filter((function(t){return t})).map((function(e){var a=e.queryEditor.params,n=new $t(a,t.$store.state.queries),i=n.getWhereText();return{id:e.id,Nombre:e.customName,Identificador:e.name,Fecha:e.fecha,Tabla:e.tableNames[0].toUpperCase(),Columnas:e.queryEditor.params.map((function(t){return t.alias})).toString().replace(/,/g,", "),Condiciones:i}}));t.queries=_.reverse(n)}))},queriesRowClick:function(t){var e=this,a=t.Identificador;this.api.$dbq({schemaSyntax:"views",columns:["v_json"],whereSyntax:"v_identificador = '"+a+"'",language:"spanish",dbID:"circus"},(function(t){var a=t[0].v_json,n=JSON.parse(a);e.$store.state.selectedQuery=n}))},containersFromArea:function(t){var e=t.index,a=(this.containers.map((function(t,e){return{data:t,index:e}})),this.containers.filter((function(t,a){return-1!=t.data.areas.indexOf(e)})));return a},queriesTableOnChange:function(t){var e=t.rowIndex,a=t.key,n=t.value;switch(a){case"Descripcion":a="descripcion";break;case"Nombre":a="customName";break;case"Tipo":a="tipo";break}var i=this.queries[e];this.$store.commit("Query_setKey",{id:i.id,key:a,value:n})},queriesRowDelete:function(t){var e=this.queries[t].id;this.$store.commit("Query_delete",e);var a=JSON.cc(this.queries);a.splice(t,1),this.queries=a},panelSwitch:function(t){this.panels[t]=!this.panels[t],window.compute()}},mounted:function(){var t=this,e=this.$store.state.database.help,a=(this.$refs.helpCuadrant,this);function n(t){var a=$(t.target),n=a.data("help-code");n||(a=a.closest('[data-help-code][data-help-code!=""]'),n=a.attr("data-help-code"));var r=n?e[n]:"",s="undefined"!=typeof r?r:n,o=$("<div/>").html(s),c=o.find("titulo").html();o.find("titulo").remove();var l=o.html();i({title:n?c:"&nbsp;",text:l})}function i(t,e){e&&window.log(t.text),"object"===Object(o["a"])(t)&&(t='<div style="height:100%;"/><titulo>'.concat(t.title,"</titulo><texto>").concat(t.text,"</texto></div>")),a.helpText=t,a.showHelpState=!0,window.circus.helpBoxCloseTimer&&clearTimeout(window.circus.helpBoxCloseTimer),window.circus.helpBoxCloseTimer=setTimeout((function(){return a.showHelpState=!1}),7e3)}function r(t){}function s(){a.panels.form||(window.circus.panelSwitch("form"),setTimeout((function(){$('[data-component="Formulario"]').find("input").eq(1).focus()}),100))}function c(){window.circus.panels.bottom=!0}window.log=function(t,e){var n=new Date,i=n.getTimezoneOffset(),r=new Date-i,s=(r.toLocaleString("en-GB",{timeZone:"UTC"}),{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}),o=new Intl.DateTimeFormat("es-ES",s).format(n);a.logText.forEach((function(t,e){return a.logText[e]=t.replace("blink_me","")})),a.logText.unshift("".concat(o,'<br><span class="').concat(e,' blink_me">').concat(t,"</span>"))},window.contextDialog=function(t,e){a.contextDialog.componentProps=t,a.contextDialog.components=e,a.contextDialog.show=!0},window.logout=function(){sessionStorage.removeItem("logged"),a.sessionId=!1},window.working=function(t){t?$("body").addClass("progress-on"):$("body").removeClass("progress-on")},window.commit=function(e,a){var n=ht[e](a),i=n.path,r=n.value;t.api.saveGlobalConfig({path:i,value:r}),t.$store.commit("set_databaseConfig",{path:i,value:r}),t.api.databaseMaps.setTablesMap()},this.loadQueries(),window.addEventListener("endcache",(function(e){t.$store.commit("set_tablesMap")}),!1),$(document).ready((function(){var t=a.$store.state.database.custom_js;t.forEach((function(t){t=k+t,console.log(t);var e=$("<script/>").attr("type","text/javascript").attr("src",t);$("body").append(e)}))})),e&&$(window.document).on("contextmenu",(function(t){return n(t),t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),!1})).on("click",(function(t){var e=$(t.target),n=e.closest(".context-dialog-container").length||e.closest("table.header").length;n||(a.contextDialog.show=!1)})),window.circus=this,window.circus.showHelpBox=i,window.showForm=s,window.showQueries=c,$(window).mousemove(r)},updated:function(){}},Ba=Ra,Aa=(a("30ec"),Object(_t["a"])(Ba,r,s,!1,null,null,null)),Ja=Aa.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(Ja)}}).$mount("#app");var Ka=b.a.parse(location.search),Ua=Ka.api;function Wa(){var t=Ka.reset;t||(t="circus.json"),$.ajax({url:Ua+"ping",data:{json:localStorage["vuexStore"],fileName:t},method:"POST",success:function(t){console.log("keepDBConnAlive!")},error:function(t){console.log("error ajax ping")}})}setInterval(Wa,6e4)},"5ae5":function(t,e,a){"use strict";var n=a("faf4"),i=a.n(n);i.a},"65ef":function(t,e,a){"use strict";var n=a("b61f"),i=a.n(n);i.a},"68c4":function(t,e,a){},"69d0":function(t,e,a){},"77d5":function(t,e,a){},ac37:function(t,e,a){"use strict";var n=a("68c4"),i=a.n(n);i.a},b61f:function(t,e,a){},c7ea:function(t,e,a){},d295:function(t,e,a){"use strict";var n=a("f8d6"),i=a.n(n);i.a},d78f:function(t,e,a){},df46:function(t,e,a){"use strict";var n=a("c7ea"),i=a.n(n);i.a},e174:function(t,e,a){"use strict";var n=a("f967"),i=a.n(n);i.a},ed5d:function(t,e,a){},f27c:function(t,e,a){},f8d6:function(t,e,a){},f967:function(t,e,a){},faf4:function(t,e,a){}});
//# sourceMappingURL=app.04c9dca6.js.map